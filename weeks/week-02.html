<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 2: Understanding Projectile Motion - Physics of Baseball</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><text y='32' font-size='32'>‚öæ</text></svg>">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/calculators.css">
</head>
<body>
    <div class="container">
        <main class="main-content">
            <header class="week-header">
                <div class="header-top">
                    <button class="nav-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                        <span class="nav-toggle-line"></span>
                        <span class="nav-toggle-line"></span>
                        <span class="nav-toggle-line"></span>
                    </button>
                    <h1 class="week-title">Week 2: Understanding Projectile Motion</h1>
                </div>
                <p class="week-description">Explore the physics of objects in flight, analyzing how baseballs follow predictable paths through space and time.</p>
            </header>

            <!-- Floating Table of Contents -->
            <div class="floating-toc" id="floating-toc" aria-label="Table of Contents">
                <button class="toc-toggle" id="toc-toggle" aria-label="Toggle Table of Contents" aria-expanded="false">
                    <span class="toc-icon">üìã</span>
                    <span class="toc-text">Contents</span>
                </button>
                <nav class="toc-content" id="toc-content">
                    <div class="toc-header">
                        <h3>Week 2 Contents</h3>
                        <button class="toc-close" id="toc-close" aria-label="Close Table of Contents">&times;</button>
                    </div>
                    <ul class="toc-list">
                        <li><a href="#objectives" class="toc-link">üéØ Learning Objectives</a></li>
                        <li class="toc-section">
                            <span class="toc-section-title">üìö Daily Lessons</span>
                            <ul class="toc-subsection">
                                <li><a href="#day-1" class="toc-link">Day 1: Introduction</a></li>
                                <li><a href="#day-2" class="toc-link">Day 2: Components</a></li>
                                <li><a href="#day-3" class="toc-link">Day 3: Laboratory</a></li>
                                <li><a href="#day-4" class="toc-link">Day 4: Advanced Analysis</a></li>
                                <li><a href="#day-5" class="toc-link">Day 5: Applications</a></li>
                            </ul>
                        </li>
                        <li class="toc-section">
                            <span class="toc-section-title">üßÆ Advanced Topics</span>
                            <ul class="toc-subsection">
                                <li><a href="#calculus-connections" class="toc-link">Calculus Connections</a></li>
                                <li><a href="#assessment-section" class="toc-link">Assessment</a></li>
                            </ul>
                        </li>
                    </ul>
                    <div class="toc-roadmap">
                        <h4 class="roadmap-title">üìç Learning Path</h4>
                        <div class="mini-roadmap">
                            <div class="mini-step current" data-section="objectives">
                                <span class="mini-step-icon">üéØ</span>
                                <span class="mini-step-text">Objectives</span>
                            </div>
                            <div class="mini-step" data-section="day-1">
                                <span class="mini-step-icon">üé™</span>
                                <span class="mini-step-text">Introduction</span>
                            </div>
                            <div class="mini-step" data-section="day-2">
                                <span class="mini-step-icon">üìê</span>
                                <span class="mini-step-text">Components</span>
                            </div>
                            <div class="mini-step" data-section="day-3">
                                <span class="mini-step-icon">üî¨</span>
                                <span class="mini-step-text">Laboratory</span>
                            </div>
                            <div class="mini-step" data-section="day-4">
                                <span class="mini-step-icon">üßÆ</span>
                                <span class="mini-step-text">Analysis</span>
                            </div>
                            <div class="mini-step" data-section="day-5">
                                <span class="mini-step-icon">‚öæ</span>
                                <span class="mini-step-text">Applications</span>
                            </div>
                            <div class="mini-step" data-section="calculus-connections">
                                <span class="mini-step-icon">üìä</span>
                                <span class="mini-step-text">Calculus</span>
                            </div>
                            <div class="mini-step" data-section="assessment-section">
                                <span class="mini-step-icon">üìù</span>
                                <span class="mini-step-text">Assessment</span>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>

            <section id="objectives" class="day-section">
                <h2>üéØ Learning Objectives</h2>
                <div class="objectives-container">
                    <ul class="objectives-list">
                        <li class="objective-item">
                            <span class="objective-icon">üéØ</span>
                            <div class="objective-content">
                                <span class="objective-text">Define projectile motion and identify the forces acting on projectiles</span>
                                <span class="objective-difficulty basic">Basic</span>
                            </div>
                        </li>
                        <li class="objective-item">
                            <span class="objective-icon">üìä</span>
                            <div class="objective-content">
                                <span class="objective-text">Analyze horizontal and vertical components of projectile motion independently</span>
                                <span class="objective-difficulty intermediate">Intermediate</span>
                            </div>
                        </li>
                        <li class="objective-item">
                            <span class="objective-icon">üßÆ</span>
                            <div class="objective-content">
                                <span class="objective-text">Apply kinematic equations to predict projectile trajectories</span>
                                <span class="objective-difficulty intermediate">Intermediate</span>
                            </div>
                        </li>
                        <li class="objective-item">
                            <span class="objective-icon">‚è±Ô∏è</span>
                            <div class="objective-content">
                                <span class="objective-text">Calculate time of flight, maximum height, and range for projectile motion</span>
                                <span class="objective-difficulty advanced">Advanced</span>
                            </div>
                        </li>
                        <li class="objective-item">
                            <span class="objective-icon">‚öæ</span>
                            <div class="objective-content">
                                <span class="objective-text">Analyze the trajectory of pitched baseballs using projectile motion principles</span>
                                <span class="objective-difficulty advanced">Advanced</span>
                            </div>
                        </li>
                        <li class="objective-item">
                            <span class="objective-icon">üî¨</span>
                            <div class="objective-content">
                                <span class="objective-text">Use technology to measure and verify projectile motion predictions</span>
                                <span class="objective-difficulty expert">Expert</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </section>

            <!-- Week Learning Roadmap -->
            <section class="week-roadmap-container" aria-labelledby="roadmap-title">
                <div class="roadmap-header">
                    <h3 class="roadmap-title" id="roadmap-title">üìç Week 2 Learning Roadmap</h3>
                    <span class="roadmap-subtitle">Follow this journey through projectile motion physics</span>
                </div>

                <div class="learning-path">
                    <div class="roadmap-step current" data-step="1">
                        <div class="step-indicator">
                            <span class="step-number">1</span>
                            <span class="step-icon">üéØ</span>
                        </div>
                        <div class="step-content">
                            <h4 class="step-title">Foundation: What is Projectile Motion?</h4>
                            <p class="step-description">Understand objects in flight and the independence principle</p>
                            <div class="step-concepts">
                                <span class="concept-tag">Projectiles</span>
                                <span class="concept-tag">Independence</span>
                                <span class="concept-tag">Gravity Only</span>
                            </div>
                        </div>
                    </div>

                    <div class="roadmap-step" data-step="2">
                        <div class="step-indicator">
                            <span class="step-number">2</span>
                            <span class="step-icon">üìê</span>
                        </div>
                        <div class="step-content">
                            <h4 class="step-title">Components: Breaking Down Motion</h4>
                            <p class="step-description">Separate horizontal and vertical motion for analysis</p>
                            <div class="step-concepts">
                                <span class="concept-tag">Vector Components</span>
                                <span class="concept-tag">Horizontal Motion</span>
                                <span class="concept-tag">Vertical Motion</span>
                            </div>
                        </div>
                    </div>

                    <div class="roadmap-step" data-step="3">
                        <div class="step-indicator">
                            <span class="step-number">3</span>
                            <span class="step-icon">üî¨</span>
                        </div>
                        <div class="step-content">
                            <h4 class="step-title">Laboratory: Measuring Trajectories</h4>
                            <p class="step-description">Use technology to capture and analyze real baseball motion</p>
                            <div class="step-concepts">
                                <span class="concept-tag">Video Analysis</span>
                                <span class="concept-tag">Data Collection</span>
                                <span class="concept-tag">Error Analysis</span>
                            </div>
                        </div>
                    </div>

                    <div class="roadmap-step" data-step="4">
                        <div class="step-indicator">
                            <span class="step-number">4</span>
                            <span class="step-icon">üßÆ</span>
                        </div>
                        <div class="step-content">
                            <h4 class="step-title">Analysis: Advanced Calculations</h4>
                            <p class="step-description">Apply kinematic equations and interactive tools</p>
                            <div class="step-concepts">
                                <span class="concept-tag">Trajectory Equations</span>
                                <span class="concept-tag">Launch Angles</span>
                                <span class="concept-tag">Interactive Tools</span>
                            </div>
                        </div>
                    </div>

                    <div class="roadmap-step" data-step="5">
                        <div class="step-indicator">
                            <span class="step-number">5</span>
                            <span class="step-icon">‚öæ</span>
                        </div>
                        <div class="step-content">
                            <h4 class="step-title">Applications: Baseball Strategy</h4>
                            <p class="step-description">Connect physics to real game situations and pitching strategy</p>
                            <div class="step-concepts">
                                <span class="concept-tag">Game Scenarios</span>
                                <span class="concept-tag">Optimization</span>
                                <span class="concept-tag">Strategy</span>
                            </div>
                        </div>
                    </div>

                    <div class="roadmap-step" data-step="6">
                        <div class="step-indicator">
                            <span class="step-number">6</span>
                            <span class="step-icon">üìä</span>
                        </div>
                        <div class="step-content">
                            <h4 class="step-title">Calculus: Mathematical Depth</h4>
                            <p class="step-description">Explore derivatives and integrals in projectile motion</p>
                            <div class="step-concepts">
                                <span class="concept-tag">Derivatives</span>
                                <span class="concept-tag">Integrals</span>
                                <span class="concept-tag">Optimization</span>
                            </div>
                        </div>
                    </div>

                    <div class="roadmap-step" data-step="7">
                        <div class="step-indicator">
                            <span class="step-number">7</span>
                            <span class="step-icon">üìù</span>
                        </div>
                        <div class="step-content">
                            <h4 class="step-title">Assessment: Demonstrate Mastery</h4>
                            <p class="step-description">Apply knowledge through quizzes, problems, and lab reports</p>
                            <div class="step-concepts">
                                <span class="concept-tag">Problem Solving</span>
                                <span class="concept-tag">Lab Reports</span>
                                <span class="concept-tag">Mastery Check</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="roadmap-footer">
                    <div class="learning-tip">
                        <span class="tip-icon">üí°</span>
                        <span class="tip-text">Build understanding step by step - each concept connects to create a complete picture of projectile motion!</span>
                    </div>
                </div>
            </section>

            <section class="day-section" id="day-1">
                <div class="day-header">
                    <h2 class="day-title">Day 1: Introduction to Projectile Motion</h2>
                    <div class="day-meta">
                        <span class="duration">50 minutes</span>
                        <span class="complexity">Introductory</span>
                    </div>
                </div>
                
                <div class="day-content">
                    <h3>üéØ Key Topics</h3>
                    <div class="topics-grid">
                        <div class="topic-card">
                            <span class="topic-icon">üéØ</span>
                            <div class="topic-info">
                                <h4>Projectile Definition</h4>
                                <p>Objects launched into air, subject only to gravity.</p>
                            </div>
                        </div>
                        <div class="topic-card">
                            <span class="topic-icon">‚ÜîÔ∏è</span>
                            <div class="topic-info">
                                <h4>Independence Principle</h4>
                                <p>Horizontal and vertical motions are independent.</p>
                            </div>
                        </div>
                        <div class="topic-card">
                            <span class="topic-icon">‚öæ</span>
                            <div class="topic-info">
                                <h4>Baseball Examples</h4>
                                <p>Pitched balls, pop flies, line drives.</p>
                            </div>
                        </div>
                        <div class="topic-card">
                            <span class="topic-icon">üìê</span>
                            <div class="topic-info">
                                <h4>Initial Assumptions</h4>
                                <p>Neglecting air resistance for now.</p>
                            </div>
                        </div>
                    </div>
                    
                    <h3>üöÄ Activities</h3>
                    <div class="activities-timeline">
                        <div class="activity-item">
                            <div class="activity-icon">üí≠</div>
                            <div class="activity-content">
                                <h4>Projectile Brainstorm (15 min)</h4>
                                <p>Identify examples of projectile motion in sports and everyday life. Focus on baseball scenarios.</p>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">üî¨</div>
                            <div class="activity-content">
                                <h4>Independence Demo (20 min)</h4>
                                <p>Drop one ball while throwing another horizontally. Both hit ground simultaneously - demonstrating independent motion.</p>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">‚öæ</div>
                            <div class="activity-content">
                                <h4>Baseball Trajectory Analysis (15 min)</h4>
                                <p>Watch slow-motion video of pitched baseballs, identifying horizontal and vertical components.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="day-section" id="day-2">
                <div class="day-header">
                    <h2 class="day-title">Day 2: Horizontal and Vertical Components</h2>
                    <div class="day-meta">
                        <span class="duration">50 minutes</span>
                        <span class="complexity">Building</span>
                    </div>
                </div>
                
                <div class="day-content">
                    <h3>üéØ Key Topics</h3>
                    <div class="topics-grid">
                        <div class="topic-card">
                            <span class="topic-icon">‚ÜîÔ∏è</span>
                            <div class="topic-info">
                                <h4>Horizontal Motion</h4>
                                <p>Constant velocity motion with no acceleration.</p>
                            </div>
                        </div>
                        <div class="topic-card">
                            <span class="topic-icon">üìâ</span>
                            <div class="topic-info">
                                <h4>Vertical Motion</h4>
                                <p>Accelerated motion under gravity's influence.</p>
                            </div>
                        </div>
                        <div class="topic-card">
                            <span class="topic-icon">üìä</span>
                            <div class="topic-info">
                                <h4>Trajectory Equations</h4>
                                <p>Mathematical relationships for projectile paths.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="concept-showcase enhanced-components-section">
                        <h3>üéØ Interactive Motion Components Analysis</h3>
                        <p class="section-description">Explore how projectile motion breaks down into independent horizontal and vertical components</p>

                        <!-- Interactive Component Visualizer -->
                        <div class="component-visualizer">
                            <div class="visualizer-header">
                                <h4>üìä Live Component Breakdown</h4>
                                <div class="visualizer-controls">
                                    <button class="viz-btn active" data-mode="components">Components</button>
                                    <button class="viz-btn" data-mode="forces">Forces</button>
                                    <button class="viz-btn" data-mode="motion">Motion</button>
                                </div>
                            </div>

                            <!-- Visual Canvas Area -->
                            <div class="component-canvas">
                                <div class="baseball-trajectory-demo">
                                    <div class="trajectory-grid">
                                        <!-- Animated baseball -->
                                        <div class="animated-baseball" id="demo-ball">‚öæ</div>

                                        <!-- Component vectors -->
                                        <div class="vector-display">
                                            <div class="horizontal-vector" id="h-vector">
                                                <div class="vector-arrow horizontal-arrow"></div>
                                                <div class="vector-label">v‚Çì = constant</div>
                                            </div>
                                            <div class="vertical-vector" id="v-vector">
                                                <div class="vector-arrow vertical-arrow"></div>
                                                <div class="vector-label">v·µß = v·µß‚ÇÄ - gt</div>
                                            </div>
                                        </div>

                                        <!-- Grid overlay -->
                                        <div class="demo-grid"></div>
                                    </div>
                                </div>

                                <!-- Control panel -->
                                <div class="demo-controls">
                                    <div class="demo-control-group">
                                        <label>Animation Speed</label>
                                        <input type="range" id="speed-control" min="0.5" max="3" value="1" step="0.1">
                                        <span id="speed-display">1.0x</span>
                                    </div>
                                    <div class="demo-control-group">
                                        <button id="play-pause-btn" class="demo-btn">‚è∏Ô∏è Pause</button>
                                        <button id="reset-btn" class="demo-btn">üîÑ Reset</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced Component Comparison -->
                        <div class="enhanced-concept-comparison">
                            <div class="component-card horizontal-card">
                                <div class="card-header">
                                    <span class="component-icon">‚ÜîÔ∏è</span>
                                    <h4>Horizontal Motion</h4>
                                    <div class="motion-indicator horizontal-indicator"></div>
                                </div>
                                <div class="card-content">
                                    <div class="motion-properties">
                                        <div class="property-item">
                                            <span class="property-label">Acceleration:</span>
                                            <span class="property-value highlighted">a‚Çì = 0</span>
                                            <span class="property-note">No horizontal forces</span>
                                        </div>
                                        <div class="property-item">
                                            <span class="property-label">Velocity:</span>
                                            <span class="property-value">v‚Çì = constant</span>
                                            <span class="property-note">Unchanged throughout flight</span>
                                        </div>
                                        <div class="property-item">
                                            <span class="property-label">Position:</span>
                                            <span class="property-value">x = x‚ÇÄ + v‚Çì‚ÇÄt</span>
                                            <span class="property-note">Linear relationship</span>
                                        </div>
                                    </div>
                                    <div class="physics-insight">
                                        <div class="insight-header">
                                            <span class="insight-icon">üî¨</span>
                                            <strong>Physics Insight</strong>
                                        </div>
                                        <p>Horizontal velocity remains constant because gravity acts only vertically. This demonstrates Newton's First Law - an object in motion stays in motion unless acted upon by an unbalanced force.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="component-card vertical-card">
                                <div class="card-header">
                                    <span class="component-icon">üìâ</span>
                                    <h4>Vertical Motion</h4>
                                    <div class="motion-indicator vertical-indicator"></div>
                                </div>
                                <div class="card-content">
                                    <div class="motion-properties">
                                        <div class="property-item">
                                            <span class="property-label">Acceleration:</span>
                                            <span class="property-value highlighted">a·µß = -9.8 m/s¬≤</span>
                                            <span class="property-note">Constant downward</span>
                                        </div>
                                        <div class="property-item">
                                            <span class="property-label">Velocity:</span>
                                            <span class="property-value">v·µß = v·µß‚ÇÄ - gt</span>
                                            <span class="property-note">Changes linearly with time</span>
                                        </div>
                                        <div class="property-item">
                                            <span class="property-label">Position:</span>
                                            <span class="property-value">y = y‚ÇÄ + v·µß‚ÇÄt - ¬Ωgt¬≤</span>
                                            <span class="property-note">Quadratic relationship</span>
                                        </div>
                                    </div>
                                    <div class="physics-insight">
                                        <div class="insight-header">
                                            <span class="insight-icon">üî¨</span>
                                            <strong>Physics Insight</strong>
                                        </div>
                                        <p>Gravity creates uniform downward acceleration. The quadratic term (-¬Ωgt¬≤) creates the characteristic parabolic trajectory shape.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Independence Principle Demonstration -->
                        <div class="independence-demonstration">
                            <h4>üé≠ The Independence Principle</h4>
                            <div class="independence-visual">
                                <div class="independence-cards">
                                    <div class="independence-card">
                                        <h5>üèÉ Horizontal Motion</h5>
                                        <div class="motion-graph horizontal-graph">
                                            <div class="graph-line straight-line"></div>
                                            <div class="graph-labels">
                                                <span class="x-label">Time</span>
                                                <span class="y-label">Position</span>
                                            </div>
                                        </div>
                                        <p>Linear: moves at constant rate</p>
                                    </div>
                                    <div class="plus-symbol">‚ûï</div>
                                    <div class="independence-card">
                                        <h5>üìâ Vertical Motion</h5>
                                        <div class="motion-graph vertical-graph">
                                            <div class="graph-line curved-line"></div>
                                            <div class="graph-labels">
                                                <span class="x-label">Time</span>
                                                <span class="y-label">Position</span>
                                            </div>
                                        </div>
                                        <p>Quadratic: accelerated by gravity</p>
                                    </div>
                                    <div class="equals-symbol">=</div>
                                    <div class="independence-card result-card">
                                        <h5>üéØ Combined Motion</h5>
                                        <div class="motion-graph combined-graph">
                                            <div class="graph-line parabolic-line"></div>
                                            <div class="graph-labels">
                                                <span class="x-label">Horizontal</span>
                                                <span class="y-label">Vertical</span>
                                            </div>
                                        </div>
                                        <p>Parabolic trajectory</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced Vector Analysis Section -->
                        <div class="enhanced-vector-analysis">
                            <h4>üéØ Interactive Vector Analysis in Baseball Context</h4>
                            <p class="vector-intro">Explore how velocity vectors decompose and evolve throughout a baseball's flight path</p>

                            <!-- Vector Visualization Interface -->
                            <div class="vector-visualization-container">
                                <div class="vector-controls-panel">
                                    <h5>‚öôÔ∏è Vector Parameters</h5>
                                    <div class="vector-control-group">
                                        <label>Initial Speed: <span id="vector-speed-display">95 mph</span></label>
                                        <input type="range" id="vector-speed" min="60" max="110" value="95" step="1">
                                        <div class="speed-indicators">
                                            <span class="speed-mark" data-speed="70">Changeup</span>
                                            <span class="speed-mark" data-speed="85">Slider</span>
                                            <span class="speed-mark" data-speed="95">Fastball</span>
                                        </div>
                                    </div>
                                    <div class="vector-control-group">
                                        <label>Launch Angle: <span id="vector-angle-display">-6¬∞</span></label>
                                        <input type="range" id="vector-angle" min="-15" max="15" value="-6" step="1">
                                        <div class="angle-indicators">
                                            <span class="angle-mark" data-angle="-10">Sinker</span>
                                            <span class="angle-mark" data-angle="0">Level</span>
                                            <span class="angle-mark" data-angle="10">Rising</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Interactive Vector Diagram -->
                                <div class="vector-diagram-container">
                                    <div class="vector-diagram" id="vector-diagram">
                                        <svg width="400" height="300" viewBox="0 0 400 300">
                                            <!-- Grid background -->
                                            <defs>
                                                <pattern id="vectorGrid" width="20" height="20" patternUnits="userSpaceOnUse">
                                                    <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e0e7ff" stroke-width="1"/>
                                                </pattern>
                                            </defs>
                                            <rect width="100%" height="100%" fill="url(#vectorGrid)"/>

                                            <!-- Coordinate axes -->
                                            <g class="axes">
                                                <line x1="50" y1="250" x2="350" y2="250" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
                                                <line x1="50" y1="250" x2="50" y2="50" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
                                                <text x="360" y="255" class="axis-label">x</text>
                                                <text x="45" y="40" class="axis-label">y</text>
                                                <text x="40" y="265" class="axis-label">0</text>
                                            </g>

                                            <!-- Arrow markers -->
                                            <defs>
                                                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                                    <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
                                                </marker>
                                                <marker id="vector-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                                    <polygon points="0 0, 10 3.5, 0 7" fill="#1976d2"/>
                                                </marker>
                                                <marker id="component-arrow-x" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                                    <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444"/>
                                                </marker>
                                                <marker id="component-arrow-y" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                                    <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
                                                </marker>
                                            </defs>

                                            <!-- Velocity vectors -->
                                            <g class="velocity-vectors">
                                                <!-- Resultant vector -->
                                                <line id="resultant-vector" x1="50" y1="250" x2="200" y2="200" stroke="#1976d2" stroke-width="4" marker-end="url(#vector-arrow)"/>

                                                <!-- Horizontal component -->
                                                <line id="horizontal-component" x1="50" y1="250" x2="190" y2="250" stroke="#ef4444" stroke-width="3" marker-end="url(#component-arrow-x)" stroke-dasharray="5,5"/>

                                                <!-- Vertical component -->
                                                <line id="vertical-component" x1="190" y1="250" x2="190" y2="200" stroke="#22c55e" stroke-width="3" marker-end="url(#component-arrow-y)" stroke-dasharray="5,5"/>

                                                <!-- Angle arc -->
                                                <path id="angle-arc" d="M 80 250 A 30 30 0 0 0 85 240" stroke="#fbbf24" stroke-width="2" fill="none"/>
                                                <text id="angle-label" x="95" y="245" class="vector-label" fill="#fbbf24">Œ∏</text>
                                            </g>

                                            <!-- Vector labels -->
                                            <g class="vector-labels">
                                                <text id="resultant-label" x="125" y="220" class="vector-label main-vector">v‚Éó‚ÇÄ</text>
                                                <text id="horizontal-label" x="120" y="265" class="vector-label component-x">v‚Çì</text>
                                                <text id="vertical-label" x="200" y="225" class="vector-label component-y">v·µß</text>
                                            </g>
                                        </svg>
                                    </div>

                                    <!-- Live calculations display -->
                                    <div class="vector-calculations">
                                        <h5>üìä Live Calculations</h5>
                                        <div class="calc-grid">
                                            <div class="calc-item">
                                                <span class="calc-label">Magnitude:</span>
                                                <span class="calc-value" id="magnitude-calc">42.5 m/s</span>
                                            </div>
                                            <div class="calc-item">
                                                <span class="calc-label">Horizontal:</span>
                                                <span class="calc-value component-x" id="horizontal-calc">42.3 m/s</span>
                                            </div>
                                            <div class="calc-item">
                                                <span class="calc-label">Vertical:</span>
                                                <span class="calc-value component-y" id="vertical-calc">-4.4 m/s</span>
                                            </div>
                                            <div class="calc-item">
                                                <span class="calc-label">Angle:</span>
                                                <span class="calc-value" id="angle-calc">-6¬∞</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Vector Evolution Timeline -->
                            <div class="vector-evolution-section">
                                <h5>‚è±Ô∏è Vector Evolution During Flight</h5>
                                <div class="evolution-timeline">
                                    <div class="timeline-controls">
                                        <label>Flight Time: <span id="time-display">0.0s</span></label>
                                        <input type="range" id="time-slider" min="0" max="100" value="0" step="1">
                                        <button id="play-evolution" class="evolution-btn">‚ñ∂Ô∏è Play</button>
                                        <button id="reset-evolution" class="evolution-btn">üîÑ Reset</button>
                                    </div>

                                    <div class="evolution-cards">
                                        <div class="evolution-card horizontal-evolution">
                                            <h6>‚ÜîÔ∏è Horizontal Component</h6>
                                            <div class="evolution-equation">v‚Çì(t) = <span id="vx-constant">42.3</span> m/s</div>
                                            <div class="evolution-description">Remains constant throughout flight</div>
                                            <div class="evolution-visual">
                                                <div class="constant-line"></div>
                                            </div>
                                        </div>

                                        <div class="evolution-card vertical-evolution">
                                            <h6>üìâ Vertical Component</h6>
                                            <div class="evolution-equation">v·µß(t) = <span id="vy-initial">-4.4</span> - 9.8t</div>
                                            <div class="evolution-description">Changes linearly with gravity</div>
                                            <div class="evolution-visual">
                                                <div class="linear-line" id="vertical-line"></div>
                                            </div>
                                        </div>

                                        <div class="evolution-card resultant-evolution">
                                            <h6>üéØ Resultant Magnitude</h6>
                                            <div class="evolution-equation">|v‚Éó(t)| = ‚àö(v‚Çì¬≤ + v·µß(t)¬≤)</div>
                                            <div class="evolution-description">Minimum at trajectory peak</div>
                                            <div class="evolution-visual">
                                                <div class="curved-line" id="resultant-line"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Baseball Context Applications -->
                            <div class="baseball-applications">
                                <h5>‚öæ Real Baseball Applications</h5>
                                <div class="application-scenarios">
                                    <div class="scenario-card">
                                        <div class="scenario-header">
                                            <span class="scenario-icon">üî•</span>
                                            <h6>Fastball Analysis</h6>
                                        </div>
                                        <div class="scenario-content">
                                            <p><strong>Typical Values:</strong> 90-105 mph, -5¬∞ to -10¬∞ angle</p>
                                            <p><strong>Vector Strategy:</strong> Maximize horizontal component for speed, minimize vertical drop</p>
                                            <div class="scenario-calculation">
                                                <span>100 mph at -8¬∞:</span>
                                                <span>v‚Çì = 44.4 m/s, v·µß = -6.2 m/s</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="scenario-card">
                                        <div class="scenario-header">
                                            <span class="scenario-icon">üìà</span>
                                            <h6>Curveball Physics</h6>
                                        </div>
                                        <div class="scenario-content">
                                            <p><strong>Typical Values:</strong> 70-85 mph, -15¬∞ to -25¬∞ angle</p>
                                            <p><strong>Vector Strategy:</strong> Larger vertical component creates dramatic drop</p>
                                            <div class="scenario-calculation">
                                                <span>75 mph at -20¬∞:</span>
                                                <span>v‚Çì = 31.5 m/s, v·µß = -11.5 m/s</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="scenario-card">
                                        <div class="scenario-header">
                                            <span class="scenario-icon">üè†</span>
                                            <h6>Home Run Launch</h6>
                                        </div>
                                        <div class="scenario-content">
                                            <p><strong>Typical Values:</strong> 95-110 mph, 25¬∞ to 35¬∞ angle</p>
                                            <p><strong>Vector Strategy:</strong> Balance horizontal distance with vertical height</p>
                                            <div class="scenario-calculation">
                                                <span>105 mph at 28¬∞:</span>
                                                <span>v‚Çì = 41.4 m/s, v·µß = 22.0 m/s</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4>Key Trajectory Formulas</h4>
                        <div class="formula-grid">
                            <div class="formula-card">
                                <h5>Time of Flight</h5>
                                <p><strong>Same Height:</strong> t = 2v<sub>y0</sub>/g</p>
                                <p><strong>Different Heights:</strong> t = (v<sub>y0</sub> + ‚àö(v<sub>y0</sub>¬≤ + 2gh‚ÇÄ))/g</p>
                                <p class="formula-note">Quadratic formula solution for y = 0</p>
                            </div>
                            <div class="formula-card">
                                <h5>Maximum Height</h5>
                                <p><strong>Formula:</strong> h<sub>max</sub> = h‚ÇÄ + v<sub>y0</sub>¬≤/(2g)</p>
                                <p><strong>Time to Peak:</strong> t<sub>peak</sub> = v<sub>y0</sub>/g</p>
                                <p class="formula-note">Energy conservation: KE ‚Üí PE conversion</p>
                            </div>
                            <div class="formula-card">
                                <h5>Range</h5>
                                <p><strong>Level Ground:</strong> R = v‚ÇÄ¬≤sin(2Œ∏)/g</p>
                                <p><strong>Elevated Launch:</strong> R = (v‚ÇÄ¬≤/g)[sin(2Œ∏) + ‚àö(sin¬≤(2Œ∏) + 2gh‚ÇÄ/v‚ÇÄ¬≤)]</p>
                                <p class="formula-note">Maximum at Œ∏ = 45¬∞ for level ground</p>
                            </div>
                        </div>

                        <div class="real-world-factors">
                            <h4>‚ö° Real-World Considerations</h4>
                            <div class="factor-grid">
                                <div class="factor-item">
                                    <span class="factor-icon">üå¨Ô∏è</span>
                                    <div class="factor-content">
                                        <h5>Air Resistance</h5>
                                        <p>Reduces horizontal velocity and creates drag force proportional to v¬≤. Major league baseballs experience ~15% range reduction due to air resistance.</p>
                                    </div>
                                </div>
                                <div class="factor-item">
                                    <span class="factor-icon">üåÄ</span>
                                    <div class="factor-content">
                                        <h5>Magnus Force</h5>
                                        <p>Spinning baseballs create pressure differences causing curve balls, sliders, and knuckleballs to deviate from parabolic paths.</p>
                                    </div>
                                </div>
                                <div class="factor-item">
                                    <span class="factor-icon">üå°Ô∏è</span>
                                    <div class="factor-content">
                                        <h5>Environmental Effects</h5>
                                        <p>Temperature, humidity, and altitude affect air density. Denver's thin air increases home run distance by ~5-7%.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3>üöÄ Activities</h3>
                    <div class="activities-timeline">
                        <div class="activity-item">
                            <div class="activity-icon">üßÆ</div>
                            <div class="activity-content">
                                <h4>Component Analysis (20 min)</h4>
                                <p>Break down projectile motion into horizontal and vertical components using kinematic equations.</p>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">üìù</div>
                            <div class="activity-content">
                                <h4>Formula Practice (20 min)</h4>
                                <p>Calculate time of flight, maximum height, and range for various projectile scenarios.</p>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">‚öæ</div>
                            <div class="activity-content">
                                <h4>Baseball Applications (10 min)</h4>
                                <p>Apply trajectory equations to pitched baseball scenarios.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="day-section" id="day-3">
                <div class="day-header">
                    <h2 class="day-title">Day 3: Laboratory Investigation</h2>
                    <div class="day-meta">
                        <span class="duration">50 minutes</span>
                        <span class="complexity">Experimental</span>
                    </div>
                </div>
                
                <div class="day-content">
                    <h3>üéØ Key Topics</h3>
                    <div class="topics-grid">
                        <div class="topic-card">
                            <span class="topic-icon">üì±</span>
                            <div class="topic-info">
                                <h4>Video Analysis</h4>
                                <p>Use slow-motion capture to track projectile paths.</p>
                            </div>
                        </div>
                        <div class="topic-card">
                            <span class="topic-icon">üìè</span>
                            <div class="topic-info">
                                <h4>Measurement Techniques</h4>
                                <p>Precise measurement of trajectory parameters.</p>
                            </div>
                        </div>
                        <div class="topic-card">
                            <span class="topic-icon">üî¨</span>
                            <div class="topic-info">
                                <h4>Data Collection</h4>
                                <p>Systematic recording of experimental data.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="concept-showcase">
                        <h3>üî¨ Lab Procedure: Projectile Motion Analysis</h3>
                        <div class="procedure-timeline">
                            <div class="procedure-step">
                                <div class="step-number">1</div>
                                <div class="step-icon">üì±</div>
                                <div class="step-content">
                                    <h4>Setup Equipment (15 min)</h4>
                                    <p>Position iPhone for slow-motion capture (240 fps). Set up radar gun and distance markers.</p>
                                    <div class="technical-details">
                                        <p><strong>Technical Setup:</strong> Camera perpendicular to motion plane, reference objects for scale, lighting for clear ball visibility. Radar gun positioned behind pitcher for accurate speed readings.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="procedure-step">
                                <div class="step-number">2</div>
                                <div class="step-icon">‚öæ</div>
                                <div class="step-content">
                                    <h4>Data Collection (20 min)</h4>
                                    <p>Record multiple pitches, capturing both radar speed and video trajectory data.</p>
                                    <div class="technical-details">
                                        <p><strong>Data Points:</strong> Initial velocity (radar), release angle (protractor/video), release height (measuring tape), ball position every 0.1s (video analysis). Minimum 5 throws per angle for statistical significance.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="procedure-step">
                                <div class="step-number">3</div>
                                <div class="step-icon">üìä</div>
                                <div class="step-content">
                                    <h4>Analysis (15 min)</h4>
                                    <p>Extract position data from video and compare with theoretical trajectory calculations.</p>
                                    <div class="technical-details">
                                        <p><strong>Analysis Methods:</strong> Frame-by-frame position tracking, coordinate system calibration using reference objects, statistical analysis of multiple trials, percentage error calculations between theory and experiment.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="experimental-considerations">
                            <h4>üéØ Sources of Experimental Error</h4>
                            <div class="error-analysis">
                                <div class="error-source">
                                    <h5>Measurement Uncertainties</h5>
                                    <ul>
                                        <li><strong>Video Resolution:</strong> ¬±2-3 cm position uncertainty per frame</li>
                                        <li><strong>Radar Gun Accuracy:</strong> ¬±1 mph typical uncertainty</li>
                                        <li><strong>Angle Measurement:</strong> ¬±2¬∞ protractor reading uncertainty</li>
                                        <li><strong>Human Timing:</strong> ¬±0.05s reaction time variations</li>
                                    </ul>
                                </div>
                                <div class="error-source">
                                    <h5>Physical Factors Not in Simple Model</h5>
                                    <ul>
                                        <li><strong>Air Resistance:</strong> Quadratic drag force F = ¬ΩœÅAv¬≤C<sub>d</sub></li>
                                        <li><strong>Ball Spin:</strong> Magnus force creating curve ball effects</li>
                                        <li><strong>Wind Effects:</strong> Horizontal air movement affecting trajectory</li>
                                        <li><strong>Ball Deformation:</strong> Compression during release affecting initial conditions</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3>üöÄ Activities</h3>
                    <div class="activities-timeline">
                        <div class="activity-item">
                            <div class="activity-icon">üìä</div>
                            <div class="activity-content">
                                <h4>Baseline Measurements (15 min)</h4>
                                <p>Record pitch velocity and setup video capture for trajectory tracking.</p>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">üé•</div>
                            <div class="activity-content">
                                <h4>Trajectory Analysis (20 min)</h4>
                                <p>Track ball position throughout flight using slow-motion video.</p>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">‚öñÔ∏è</div>
                            <div class="activity-content">
                                <h4>Theory vs Reality (15 min)</h4>
                                <p>Compare experimental results with theoretical predictions.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="day-section" id="day-4">
                <div class="day-header">
                    <h2 class="day-title">Day 4: Advanced Analysis</h2>
                    <div class="day-meta">
                        <span class="duration">50 minutes</span>
                        <span class="complexity">Advanced</span>
                    </div>
                </div>
                
                <div class="day-content">
                    <h3>üéØ Key Topics</h3>
                    <div class="topics-grid">
                        <div class="topic-card">
                            <span class="topic-icon">üßÆ</span>
                            <div class="topic-info">
                                <h4>Component Calculation</h4>
                                <p>Calculate horizontal and vertical velocity components from trajectory data using vector trigonometry and kinematic analysis.</p>
                                <div class="topic-depth">
                                    <p><strong>Advanced Methods:</strong> Inverse trajectory analysis, least-squares fitting to experimental data, and uncertainty propagation in calculations.</p>
                                </div>
                            </div>
                        </div>
                        <div class="topic-card">
                            <span class="topic-icon">üìê</span>
                            <div class="topic-info">
                                <h4>Launch Angle Determination</h4>
                                <p>Determine actual launch angles from video analysis using geometric methods and trajectory fitting.</p>
                                <div class="topic-depth">
                                    <p><strong>Precision Techniques:</strong> Multi-frame analysis, coordinate transformation, and correction for camera perspective effects.</p>
                                </div>
                            </div>
                        </div>
                        <div class="topic-card">
                            <span class="topic-icon">‚öñÔ∏è</span>
                            <div class="topic-info">
                                <h4>Theory vs Experiment</h4>
                                <p>Compare theoretical predictions with real measurements using statistical analysis and error quantification.</p>
                                <div class="topic-depth">
                                    <p><strong>Statistical Methods:</strong> Chi-squared goodness of fit, confidence intervals, and systematic vs random error identification.</p>
                                </div>
                            </div>
                        </div>
                        <div class="topic-card">
                            <span class="topic-icon">‚öæ</span>
                            <div class="topic-info">
                                <h4>Baseball Strategy</h4>
                                <p>Apply findings to pitching mechanics and game situations using physics-based optimization.</p>
                                <div class="topic-depth">
                                    <p><strong>Strategic Applications:</strong> Strike zone targeting algorithms, pitch sequencing based on trajectory analysis, and biomechanical optimization.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="advanced-physics-section">
                        <h3>üî¨ Advanced Physics Concepts</h3>
                        <div class="physics-concepts">
                            <div class="physics-concept">
                                <h4>‚ö° Energy Conservation in Projectile Motion</h4>
                                <div class="concept-explanation">
                                    <p><strong>Total Mechanical Energy:</strong> E = KE + PE = ¬Ωmv¬≤ + mgh</p>
                                    <p><strong>At Launch:</strong> E‚ÇÄ = ¬Ωmv‚ÇÄ¬≤ + mgh‚ÇÄ</p>
                                    <p><strong>At Any Point:</strong> E(t) = ¬Ωm[v‚ÇÄ‚Çì¬≤ + (v‚ÇÄ·µß - gt)¬≤] + mg[h‚ÇÄ + v‚ÇÄ·µßt - ¬Ωgt¬≤]</p>
                                    <div class="baseball-insight">
                                        <p><strong>‚öæ Baseball Application:</strong> At the peak of trajectory, all vertical kinetic energy converts to potential energy. This explains why v_y = 0 at maximum height, while horizontal kinetic energy remains constant.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="physics-concept">
                                <h4>üéØ Momentum Conservation and Impulse</h4>
                                <div class="concept-explanation">
                                    <p><strong>Momentum Vector:</strong> p‚Éó = mv‚Éó = m(v‚ÇÄ‚Çì √Æ + (v‚ÇÄ·µß - gt) ƒµ)</p>
                                    <p><strong>Impulse from Gravity:</strong> J‚Éó = ‚à´F‚Éódt = mg‚Éót (only vertical component)</p>
                                    <p><strong>Change in Momentum:</strong> Œîp‚Éó = p‚Éó(t) - p‚Éó‚ÇÄ = -mgt ƒµ</p>
                                    <div class="baseball-insight">
                                        <p><strong>‚öæ Baseball Application:</strong> Gravity continuously changes the ball's momentum in the vertical direction. The horizontal momentum component remains constant because no horizontal forces act on the ball.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="physics-concept">
                                <h4>üìä Force Analysis and Acceleration</h4>
                                <div class="concept-explanation">
                                    <p><strong>Net Force:</strong> F‚Éó_net = mg‚Éó = -mg ƒµ (weight only)</p>
                                    <p><strong>Newton's Second Law:</strong> F‚Éó_net = ma‚Éó ‚Üí a‚Éó = g‚Éó = -g ƒµ</p>
                                    <p><strong>Force Components:</strong> F_x = 0, F_y = -mg</p>
                                    <div class="baseball-insight">
                                        <p><strong>‚öæ Baseball Application:</strong> The constant downward force of gravity creates uniform acceleration, which is why trajectory equations are quadratic in time. This is fundamental to all projectile motion in baseball.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="concept-showcase">
                        <h3>üéØ Interactive Projectile Motion Calculator</h3>
                        <p>Use this interactive calculator to explore how different launch parameters affect baseball trajectory:</p>
                        
                        <div class="calculator-container enhanced-calculator">
                            <div class="calculator-header">
                                <h4>üéØ Interactive Baseball Trajectory Calculator</h4>
                                <div class="calculator-info">
                                    <span class="info-icon" title="Adjust parameters to see real-time trajectory changes">‚ÑπÔ∏è</span>
                                    <span class="live-indicator">üü¢ Live Updates</span>
                                </div>
                            </div>
                            <div class="calculator-controls">
                                <div class="control-group" data-tooltip="Typical baseball speeds: Fastball 85-105 mph (38-47 m/s), Changeup 70-85 mph (31-38 m/s)">
                                    <label>Initial Velocity: <span id="velocity-display">30 m/s</span></label>
                                    <input type="range" id="velocity-slider" min="20" max="50" value="30" step="1" aria-describedby="velocity-help">
                                    <div class="control-indicators">
                                        <span class="indicator-mark" data-value="31">Changeup</span>
                                        <span class="indicator-mark" data-value="42">Fastball</span>
                                    </div>
                                    <div id="velocity-help" class="control-help">Adjust ball speed (20-50 m/s range covers most baseball scenarios)</div>
                                </div>
                                <div class="control-group" data-tooltip="Optimal angle for maximum range is 45¬∞, but real pitches are typically -10¬∞ to +15¬∞">
                                    <label>Launch Angle: <span id="angle-display">25¬∞</span></label>
                                    <input type="range" id="angle-slider" min="15" max="45" value="25" step="1" aria-describedby="angle-help">
                                    <div class="control-indicators">
                                        <span class="indicator-mark" data-value="22">Line Drive</span>
                                        <span class="indicator-mark" data-value="35">Pop Fly</span>
                                    </div>
                                    <div id="angle-help" class="control-help">Release angle affects trajectory shape and landing distance</div>
                                </div>
                                <div class="control-group" data-tooltip="Average pitcher height: 6'2\" (1.88m). Range covers youth to professional levels">
                                    <label>Release Height: <span id="height-display">1.8 m</span></label>
                                    <input type="range" id="height-slider" min="1.0" max="2.5" value="1.8" step="0.1" aria-describedby="height-help">
                                    <div class="control-indicators">
                                        <span class="indicator-mark" data-value="1.5">Youth</span>
                                        <span class="indicator-mark" data-value="1.88">Average</span>
                                        <span class="indicator-mark" data-value="2.1">Tall</span>
                                    </div>
                                    <div id="height-help" class="control-help">Higher release points can increase effective range</div>
                                </div>
                                <div class="calculation-mode">
                                    <label class="calculation-mode-label">
                                        <input type="checkbox" id="auto-calculate" checked>
                                        <span class="checkmark"></span>
                                        Auto-calculate on change
                                    </label>
                                    <button id="calculate-btn" class="calculate-button">üîÑ Recalculate</button>
                                </div>
                            </div>
                            <div class="calculator-results">
                                <div class="result-item">
                                    <strong>Time of Flight:</strong> <span id="time-result">--</span>
                                </div>
                                <div class="result-item">
                                    <strong>Maximum Height:</strong> <span id="height-result">--</span>
                                </div>
                                <div class="result-item">
                                    <strong>Range:</strong> <span id="range-result">--</span>
                                </div>
                            </div>

                            <!-- Enhanced Trajectory Visualization -->
                            <div class="trajectory-visualization">
                                <h4>üìä Live Trajectory Plot</h4>
                                <canvas id="trajectory-canvas" width="600" height="300"></canvas>
                                <div class="canvas-legend">
                                    <span class="legend-item">
                                        <span class="legend-color blue"></span> Current Trajectory
                                    </span>
                                    <span class="legend-item">
                                        <span class="legend-color green"></span> Optimal 45¬∞ (reference)
                                    </span>
                                </div>
                            </div>

                            <!-- Advanced Calculator Features -->
                            <div class="advanced-features">
                                <h4>üéØ Advanced Analysis</h4>
                                <div class="advanced-results">
                                    <div class="result-grid">
                                        <div class="result-card">
                                            <strong>Velocity Components</strong>
                                            <div>Horizontal: <span id="vx-result">--</span></div>
                                            <div>Vertical: <span id="vy-result">--</span></div>
                                        </div>
                                        <div class="result-card">
                                            <strong>At Peak Height</strong>
                                            <div>Time: <span id="peak-time-result">--</span></div>
                                            <div>Height: <span id="peak-height-result">--</span></div>
                                        </div>
                                        <div class="result-card">
                                            <strong>Impact Analysis</strong>
                                            <div>Impact Speed: <span id="impact-speed-result">--</span></div>
                                            <div>Impact Angle: <span id="impact-angle-result">--</span></div>
                                        </div>
                                        <div class="result-card">
                                            <strong>Efficiency</strong>
                                            <div>Range vs 45¬∞: <span id="efficiency-result">--</span></div>
                                            <div>Hang Time: <span id="hang-time-result">--</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4>üé¨ Try These Experiments:</h4>
                        <ul>
                            <li>Adjust the <strong>launch angle</strong> from 15¬∞ to 45¬∞ and observe the effect on range</li>
                            <li>Change the <strong>initial velocity</strong> to see how speed affects both height and distance</li>
                            <li>Modify the <strong>release height</strong> to simulate different pitcher heights</li>
                        </ul>
                        
                        <h4>üí° Key Observations:</h4>
                        <ul>
                            <li>Notice how the optimal angle for maximum range changes with different conditions</li>
                            <li>Observe that flight time depends only on vertical motion components</li>
                            <li>See how release height significantly affects total range</li>
                        </ul>
                    </div>
                    
                    <h3>üöÄ Activities</h3>
                    <div class="activities-timeline">
                        <div class="activity-item">
                            <div class="activity-icon">üéØ</div>
                            <div class="activity-content">
                                <h4>Strike Zone Analysis (20 min)</h4>
                                <p>Calculate optimal release parameters for different strike zone targets.</p>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">üìä</div>
                            <div class="activity-content">
                                <h4>Velocity Components (20 min)</h4>
                                <p>Determine horizontal and vertical speeds at different points in flight.</p>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">üß†</div>
                            <div class="activity-content">
                                <h4>Strategy Applications (10 min)</h4>
                                <p>Connect trajectory analysis to pitching strategy and game situations.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="day-section" id="day-5">
                <div class="day-header">
                    <h2 class="day-title">Day 5: Applications and Problem Solving</h2>
                    <div class="day-meta">
                        <span class="duration">50 minutes</span>
                        <span class="complexity">Synthesis</span>
                    </div>
                </div>
                
                <div class="day-content">
                    <h3>üéØ Key Topics</h3>
                    <div class="topics-grid">
                        <div class="topic-card">
                            <span class="topic-icon">üéØ</span>
                            <div class="topic-info">
                                <h4>Strike Zone Physics</h4>
                                <p>Use trajectory analysis to understand optimal pitch placement.</p>
                            </div>
                        </div>
                        <div class="topic-card">
                            <span class="topic-icon">‚öôÔ∏è</span>
                            <div class="topic-info">
                                <h4>Release Parameters</h4>
                                <p>Determine optimal angles and speeds for different game situations.</p>
                            </div>
                        </div>
                        <div class="topic-card">
                            <span class="topic-icon">üß©</span>
                            <div class="topic-info">
                                <h4>Problem Solving</h4>
                                <p>Apply projectile motion equations to complex baseball scenarios.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="concept-showcase">
                        <h3>üéØ Week 2 Synthesis Challenge</h3>
                        <div class="procedure-timeline">
                            <div class="procedure-step">
                                <div class="step-number">1</div>
                                <div class="step-icon">üéØ</div>
                                <div class="step-content">
                                    <h4>Scenario Selection (15 min)</h4>
                                    <p>Choose specific game situations requiring different pitch trajectories</p>
                                    <div class="scenario-examples">
                                        <ul>
                                            <li><strong>Strike 3 Scenario:</strong> Need to hit bottom of strike zone (knee-high)</li>
                                            <li><strong>Pick-off Attempt:</strong> Optimize throw trajectory to second base</li>
                                            <li><strong>Home Run Analysis:</strong> Determine if hit ball clears 12-foot fence at 330 feet</li>
                                            <li><strong>Intentional Walk:</strong> Calculate safe trajectory outside strike zone</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="procedure-step">
                                <div class="step-number">2</div>
                                <div class="step-icon">üßÆ</div>
                                <div class="step-content">
                                    <h4>Trajectory Calculations (20 min)</h4>
                                    <p>Apply equations to determine optimal release parameters</p>
                                    <div class="calculation-framework">
                                        <p><strong>Required Calculations:</strong></p>
                                        <ul>
                                            <li>Initial velocity components: v‚ÇÄ‚Çì = v‚ÇÄcos(Œ∏), v‚ÇÄ·µß = v‚ÇÄsin(Œ∏)</li>
                                            <li>Time to target: Solve quadratic y(t) = h‚ÇÄ + v‚ÇÄ·µßt - ¬Ωgt¬≤ = y_target</li>
                                            <li>Horizontal distance: x = v‚ÇÄ‚Çì √ó t_target</li>
                                            <li>Error analysis: Sensitivity to angle/speed variations</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="procedure-step">
                                <div class="step-number">3</div>
                                <div class="step-icon">‚öæ</div>
                                <div class="step-content">
                                    <h4>Strategic Analysis (15 min)</h4>
                                    <p>Connect physics calculations to pitching strategy and effectiveness</p>
                                    <div class="strategic-connections">
                                        <p><strong>Physics-Strategy Links:</strong></p>
                                        <ul>
                                            <li><strong>Release Point Consistency:</strong> Small angle variations (¬±1¬∞) change strike zone location by ¬±3-4 inches</li>
                                            <li><strong>Velocity-Location Trade-off:</strong> Faster pitches require steeper angles for same strike zone target</li>
                                            <li><strong>Timing Windows:</strong> Catchers have ~0.4s window based on optimal trajectory time</li>
                                            <li><strong>Biomechanical Efficiency:</strong> Natural arm slot angles vs. required trajectory angles</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="synthesis-challenges">
                            <h4>üèÜ Advanced Challenge Problems</h4>
                            <div class="challenge-grid">
                                <div class="challenge-card">
                                    <h5>üéØ Perfect Strike Challenge</h5>
                                    <p><strong>Scenario:</strong> 95 mph fastball from 6'2" pitcher must hit center of strike zone (knee to chest, 17" wide)</p>
                                    <p><strong>Challenge:</strong> Calculate allowable release angle range for consistent strikes. Consider that 1¬∞ error = ~6" miss at plate.</p>
                                    <p><strong>Physics Focus:</strong> Error propagation, tolerance analysis, geometric constraints</p>
                                </div>

                                <div class="challenge-card">
                                    <h5>üèÉ Steal Prevention Analysis</h5>
                                    <p><strong>Scenario:</strong> Catcher must throw to second base (127 feet) to beat runner (3.5s to steal)</p>
                                    <p><strong>Challenge:</strong> Optimize throw trajectory for minimum time while clearing pitcher's mound (10" high obstacle at 60'6")</p>
                                    <p><strong>Physics Focus:</strong> Constrained optimization, trajectory clearance calculations</p>
                                </div>

                                <div class="challenge-card">
                                    <h5>üí® Wind Effect Investigation</h5>
                                    <p><strong>Scenario:</strong> 15 mph wind affects both horizontal and vertical ball motion</p>
                                    <p><strong>Challenge:</strong> Modify projectile equations to include constant wind acceleration. Calculate trajectory changes.</p>
                                    <p><strong>Physics Focus:</strong> Vector addition of accelerations, modified kinematic equations</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3>üöÄ Activities</h3>
                    <div class="activities-timeline">
                        <div class="activity-item">
                            <div class="activity-icon">üß©</div>
                            <div class="activity-content">
                                <h4>Complex Problem Solving (25 min)</h4>
                                <p>Solve multi-step projectile motion problems with baseball applications.</p>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">üéÆ</div>
                            <div class="activity-content">
                                <h4>Game Situation Analysis (20 min)</h4>
                                <p>Analyze real game footage to apply projectile motion principles.</p>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon">üîó</div>
                            <div class="activity-content">
                                <h4>Week Synthesis (5 min)</h4>
                                <p>Connect projectile motion concepts and preview forces in Week 3.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Calculus Connections in Projectile Motion -->
            <section class="calculus-connections-section" id="calculus-connections">
                <h2>üßÆ Calculus in Projectile Motion</h2>
                <p class="section-intro">Calculus reveals the deep mathematical structure behind projectile motion. Understanding derivatives and integrals in this context unlocks precise analysis of baseball trajectories and optimal pitching strategies.</p>

                <div class="content-difficulty-selector">
                    <div class="difficulty-tabs">
                        <button class="difficulty-tab active" data-level="basic" aria-label="Basic level content">
                            <span class="tab-icon">üìö</span>
                            <span class="tab-text">Basic</span>
                        </button>
                        <button class="difficulty-tab" data-level="intermediate" aria-label="Intermediate level content">
                            <span class="tab-icon">üéØ</span>
                            <span class="tab-text">Intermediate</span>
                        </button>
                        <button class="difficulty-tab" data-level="advanced" aria-label="Advanced level content">
                            <span class="tab-icon">üèÜ</span>
                            <span class="tab-text">Advanced</span>
                        </button>
                    </div>
                </div>

                <div class="difficulty-content basic-content active" data-level="basic">
                    <div class="calculus-basics">
                        <h3>üéØ Calculus Basics for Projectile Motion</h3>
                        <div class="basic-concept-grid">
                            <div class="basic-concept-card">
                                <h4>üìà What is a Derivative?</h4>
                                <p>A derivative tells us the <strong>rate of change</strong>. In baseball:</p>
                                <ul>
                                    <li>Position ‚Üí Velocity (how fast location changes)</li>
                                    <li>Velocity ‚Üí Acceleration (how fast speed changes)</li>
                                </ul>
                                <div class="example-box">
                                    <p><strong>Example:</strong> If a ball's height is y = 10 - 5t¬≤, then velocity is dy/dt = -10t</p>
                                    <p>At t = 1 second, the ball is falling at -10 m/s</p>
                                </div>
                            </div>
                            <div class="basic-concept-card">
                                <h4>üìä What is an Integral?</h4>
                                <p>An integral tells us the <strong>total accumulation</strong>. In baseball:</p>
                                <ul>
                                    <li>Acceleration ‚Üí Velocity (total speed change)</li>
                                    <li>Velocity ‚Üí Position (total distance traveled)</li>
                                </ul>
                                <div class="example-box">
                                    <p><strong>Example:</strong> If acceleration is a = -10 m/s¬≤, then after 2 seconds:</p>
                                    <p>Velocity change = ‚à´(-10)dt = -10t = -20 m/s</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="difficulty-content intermediate-content" data-level="intermediate">
                    <div class="calculus-concepts-grid">
                        <!-- Derivatives in Projectile Motion -->
                        <div class="calculus-concept-card derivatives-card">
                            <div class="concept-header">
                                <span class="concept-icon">üìà</span>
                                <h3>Derivatives: Trajectory Analysis</h3>
                            </div>

                            <div class="concept-explanation">
                                <p class="concept-intro">Derivatives reveal how position changes create velocity, and how velocity changes create acceleration in projectile motion.</p>

                                <div class="mathematical-detail">
                                    <h4>Position Functions for Projectile Motion:</h4>
                                    <div class="equation-block">
                                        <div class="equation">x(t) = v‚ÇÄ‚Çì¬∑t + x‚ÇÄ</div>
                                        <div class="equation">y(t) = v‚ÇÄ·µß¬∑t - ¬Ωgt¬≤ + y‚ÇÄ</div>
                                    </div>

                                    <h4>Velocity Through Derivatives:</h4>
                                    <div class="equation-block">
                                        <div class="equation">v‚Çì(t) = dx/dt = v‚ÇÄ‚Çì (constant)</div>
                                        <div class="equation">v·µß(t) = dy/dt = v‚ÇÄ·µß - gt</div>
                                    </div>
                                </div>

                                <div class="baseball-application">
                                    <h4>‚öæ Baseball Application:</h4>
                                    <p>When a pitcher releases a fastball at 95 mph (42.5 m/s) at 6¬∞ below horizontal from 6 feet high:</p>
                                    <ul>
                                        <li><strong>Initial velocity components:</strong> v‚Çì = 42.3 m/s, v·µß = -4.4 m/s</li>
                                        <li><strong>Position functions:</strong> x(t) = 42.3t, y(t) = 1.83 - 4.4t - 4.9t¬≤</li>
                                        <li><strong>Velocity evolution:</strong> v·µß(t) = -4.4 - 9.8t (continuously decreasing)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    <!-- Integrals in Projectile Motion -->
                    <div class="calculus-concept-card integrals-card">
                        <div class="concept-header">
                            <span class="concept-icon">üìä</span>
                            <h3>Integrals: Reconstructing Motion</h3>
                        </div>

                        <div class="concept-explanation">
                            <p class="concept-intro">Integrals allow us to work backwards from acceleration to find velocity and position, essential for trajectory prediction.</p>

                            <div class="mathematical-detail">
                                <h4>From Constant Acceleration to Motion:</h4>
                                <div class="equation-block">
                                    <div class="equation">a(t) = -g ƒµ (gravity only)</div>
                                </div>

                                <h4>Integrate Once for Velocity:</h4>
                                <div class="equation-block">
                                    <div class="equation">v(t) = ‚à´ a(t) dt = -gt ƒµ + v‚ÇÄ</div>
                                    <div class="equation">v(t) = v‚ÇÄ‚Çì √Æ + (v‚ÇÄ·µß - gt) ƒµ</div>
                                </div>

                                <h4>Integrate Again for Position:</h4>
                                <div class="equation-block">
                                    <div class="equation">r(t) = ‚à´ v(t) dt = v‚ÇÄ‚Çìt √Æ + (v‚ÇÄ·µßt - ¬Ωgt¬≤) ƒµ + r‚ÇÄ</div>
                                </div>
                            </div>

                            <div class="baseball-application">
                                <h4>‚öæ Baseball Application:</h4>
                                <p>Finding optimal launch angle for maximum range:</p>
                                <ul>
                                    <li><strong>Range formula (from integration):</strong> R = (v‚ÇÄ¬≤sin(2Œ∏))/g</li>
                                    <li><strong>Maximum at Œ∏ = 45¬∞:</strong> sin(2Œ∏) = sin(90¬∞) = 1</li>
                                    <li><strong>For 100 mph (44.7 m/s) hit:</strong> R_max = (44.7)¬≤/9.8 ‚âà 204m</li>
                                    <li><strong>Real factor:</strong> Air resistance reduces this significantly</li>
                                </ul>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>

                <div class="difficulty-content advanced-content" data-level="advanced">
                    <!-- Advanced Calculus Content -->
                    <div class="calculus-concepts-grid">
                        <!-- All Previous Content Plus Advanced -->
                        <div class="calculus-concept-card advanced-derivatives">
                            <div class="concept-header">
                                <span class="concept-icon">üìà</span>
                                <h3>Advanced Derivative Applications</h3>
                            </div>
                            <div class="concept-explanation">
                                <h4>Acceleration Through Second Derivatives:</h4>
                                <div class="equation-block">
                                    <div class="equation">a‚Çì(t) = d¬≤x/dt¬≤ = 0</div>
                                    <div class="equation">a·µß(t) = d¬≤y/dt¬≤ = -g</div>
                                </div>
                                <div class="advanced-note">
                                    <p><strong>üî¨ Advanced Insight:</strong> The second derivative reveals that horizontal acceleration is zero (no forces), while vertical acceleration is constant (gravity only).</p>
                                </div>
                            </div>
                        </div>
                    </div>

                <!-- Calculus Chain for Projectile Motion -->
                <div class="calculus-chain-container">
                    <h3>üéØ The Calculus Chain of Projectile Motion</h3>
                    <div class="calculus-chain">
                        <div class="chain-step">
                            <div class="step-content">
                                <span class="variable">Position r(t)</span>
                                <span class="units">meters</span>
                                <span class="example">Ball location in space</span>
                            </div>
                        </div>
                        <div class="chain-arrow">
                            <span class="arrow-symbol">‚Üí</span>
                            <span class="operation">derivative</span>
                        </div>
                        <div class="chain-step">
                            <div class="step-content">
                                <span class="variable">Velocity v(t)</span>
                                <span class="units">m/s</span>
                                <span class="example">How fast position changes</span>
                            </div>
                        </div>
                        <div class="chain-arrow">
                            <span class="arrow-symbol">‚Üí</span>
                            <span class="operation">derivative</span>
                        </div>
                        <div class="chain-step">
                            <div class="step-content">
                                <span class="variable">Acceleration a(t)</span>
                                <span class="units">m/s¬≤</span>
                                <span class="example">Gravity's effect: -9.8 m/s¬≤</span>
                            </div>
                        </div>
                    </div>

                    <div class="reverse-chain">
                        <h4>Working Backwards (Integration):</h4>
                        <div class="calculus-chain">
                            <div class="chain-step">
                                <div class="step-content">
                                    <span class="variable">Acceleration a(t)</span>
                                    <span class="units">m/s¬≤</span>
                                    <span class="example">Known: gravity = -g</span>
                                </div>
                            </div>
                            <div class="chain-arrow">
                                <span class="arrow-symbol">‚Üí</span>
                                <span class="operation">integrate</span>
                            </div>
                            <div class="chain-step">
                                <div class="step-content">
                                    <span class="variable">Velocity v(t)</span>
                                    <span class="units">m/s</span>
                                    <span class="example">Find speed at any time</span>
                                </div>
                            </div>
                            <div class="chain-arrow">
                                <span class="arrow-symbol">‚Üí</span>
                                <span class="operation">integrate</span>
                            </div>
                            <div class="chain-step">
                                <div class="step-content">
                                    <span class="variable">Position r(t)</span>
                                    <span class="units">meters</span>
                                    <span class="example">Predict ball location</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                    <!-- Advanced Applications -->
                    <div class="advanced-applications">
                        <h3>üèÜ Advanced Calculus Applications</h3>

                    <div class="application-grid">
                        <div class="application-card">
                            <h4>üìà Optimization Problems</h4>
                            <p><strong>Find maximum range:</strong></p>
                            <div class="equation-block">
                                <div class="equation">dR/dŒ∏ = (2v‚ÇÄ¬≤cos(2Œ∏))/g = 0</div>
                                <div class="equation">cos(2Œ∏) = 0 ‚Üí Œ∏ = 45¬∞</div>
                            </div>
                            <p>Calculus proves mathematically that 45¬∞ gives maximum range in vacuum.</p>
                        </div>

                        <div class="application-card">
                            <h4>‚ö° Instantaneous Analysis</h4>
                            <p><strong>Ball velocity at any moment:</strong></p>
                            <div class="equation-block">
                                <div class="equation">|v(t)| = ‚àö(v‚ÇÄ‚Çì¬≤ + (v‚ÇÄ·µß - gt)¬≤)</div>
                            </div>
                            <p>Critical for understanding impact forces and energy transfer.</p>
                        </div>

                        <div class="application-card">
                            <h4>üéØ Trajectory Curvature</h4>
                            <p><strong>Path sharpness:</strong></p>
                            <div class="equation-block">
                                <div class="equation">Œ∫ = |d¬≤y/dx¬≤| / [1 + (dy/dx)¬≤]^(3/2)</div>
                            </div>
                            <p>Describes how sharply the ball's path curves due to gravity.</p>
                        </div>
                    </div>
                </div>

                <!-- Summary -->
                <div class="calculus-summary">
                    <h3>üé≠ Why Calculus Matters for Baseball</h3>
                    <div class="summary-grid">
                        <div class="summary-point">
                            <span class="point-icon">‚ö°</span>
                            <div class="point-content">
                                <h4>Precision Prediction</h4>
                                <p>Calculus gives exact equations for ball location at any future time, not just approximations.</p>
                            </div>
                        </div>
                        <div class="summary-point">
                            <span class="point-icon">üèÜ</span>
                            <div class="point-content">
                                <h4>Optimization</h4>
                                <p>Find the mathematically perfect launch angle, release point, or trajectory for any game situation.</p>
                            </div>
                        </div>
                        <div class="summary-point">
                            <span class="point-icon">üî¨</span>
                            <div class="point-content">
                                <h4>Understanding Change</h4>
                                <p>See exactly how gravity affects velocity over time, enabling strategic timing decisions.</p>
                            </div>
                        </div>
                        <div class="summary-point">
                            <span class="point-icon">‚öæ</span>
                            <div class="point-content">
                                <h4>Real Applications</h4>
                                <p>Modern baseball analytics use these calculus principles for pitch design and hitting optimization.</p>
                            </div>
                        </div>
                    </div>

                        <div class="closing-thought">
                            <p>Calculus isn't just abstract mathematics - it's the precise language that describes how every baseball moves through space. Every pitch, hit, and catch follows these fundamental relationships between position, velocity, and acceleration that calculus makes mathematically exact.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Assessment Section -->
            <section class="assessment-section" id="assessment-section">
                <h2>üìù Week 2 Assessment</h2>
                
                <div class="assessment-tabs">
                    <button class="tab-button active" data-tab="quiz">Quiz</button>
                    <button class="tab-button" data-tab="practice">Practice Problems</button>
                    <button class="tab-button" data-tab="lab">Lab Report</button>
                </div>
                
                <div class="tab-content active" id="quiz-tab">
                    <div class="assessment-preview">
                        <div class="preview-header">
                            <h3>üìù Quiz Topics</h3>
                            <div class="difficulty-badges">
                                <span class="difficulty-badge basic">Basic</span>
                                <span class="difficulty-badge intermediate">Intermediate</span>
                                <span class="difficulty-badge advanced">Advanced</span>
                            </div>
                        </div>
                        
                        <div class="topic-previews">
                            <div class="topic-preview">
                                <div class="preview-icon">üéØ</div>
                                <div class="preview-content">
                                    <h4>Projectile Motion Fundamentals</h4>
                                    <p>Test understanding of horizontal and vertical motion components, time of flight, and range calculations.</p>
                                    <div class="preview-tags">
                                        <span class="tag">Kinematics</span>
                                        <span class="tag">Vector Analysis</span>
                                        <span class="tag">Time of Flight</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="topic-preview">
                                <div class="preview-icon">üìê</div>
                                <div class="preview-content">
                                    <h4>Baseball Trajectory Analysis</h4>
                                    <p>Apply projectile motion equations to analyze pitch paths, optimal release angles, and strike zone targeting.</p>
                                    <div class="preview-tags">
                                        <span class="tag">Launch Angle</span>
                                        <span class="tag">Release Point</span>
                                        <span class="tag">Strike Zone</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="topic-preview">
                                <div class="preview-icon">üßÆ</div>
                                <div class="preview-content">
                                    <h4>Mathematical Problem Solving</h4>
                                    <p>Solve complex projectile motion problems using kinematic equations and vector decomposition.</p>
                                    <div class="preview-tags">
                                        <span class="tag">Equations</span>
                                        <span class="tag">Problem Solving</span>
                                        <span class="tag">Calculations</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-actions">
                            <div class="assessment-cta">
                                <p class="cta-text">Ready to test your knowledge?</p>
                                <button class="btn btn-primary assessment-start-btn" id="start-quiz" aria-label="Start Week 2 Projectile Motion Quiz">
                                    <span class="loading-spinner" style="display: none;" aria-hidden="true"></span>
                                    <span class="btn-icon">üöÄ</span>
                                    <span class="btn-text">Start Interactive Quiz</span>
                                </button>
                                <p class="assessment-info">15-20 questions ‚Ä¢ ~10 minutes</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="practice-tab">
                    <div class="assessment-preview">
                        <div class="preview-header">
                            <h3>üéØ Practice Problems</h3>
                            <div class="difficulty-badges">
                                <span class="difficulty-badge basic">Guided</span>
                                <span class="difficulty-badge intermediate">Independent</span>
                                <span class="difficulty-badge advanced">Challenge</span>
                            </div>
                        </div>
                        
                        <div class="problem-categories">
                            <div class="category-card">
                                <div class="category-header">
                                    <span class="category-icon">üìê</span>
                                    <h4>Trajectory Calculations</h4>
                                </div>
                                <div class="category-content">
                                    <p><strong>Problem Set A:</strong> Calculate range, maximum height, and time of flight for various projectile motion scenarios.</p>
                                    <ul class="problem-list">
                                        <li>üéØ Optimal pitch release angle for strike zone targeting</li>
                                        <li>üìè Maximum range calculations for different initial velocities</li>
                                        <li>‚è±Ô∏è Time of flight analysis for various launch angles</li>
                                        <li>üìä Comparing trajectories with different initial conditions</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="category-card">
                                <div class="category-header">
                                    <span class="category-icon">‚öæ</span>
                                    <h4>Baseball Applications</h4>
                                </div>
                                <div class="category-content">
                                    <p><strong>Problem Set B:</strong> Apply projectile motion principles to real baseball scenarios and game situations.</p>
                                    <ul class="problem-list">
                                        <li>üèüÔ∏è Determining if a hit ball clears the outfield fence</li>
                                        <li>üéØ Analyzing catcher's throw to second base trajectory</li>
                                        <li>‚öæ Comparing fastball vs curveball flight paths</li>
                                        <li>üå¨Ô∏è Effect of wind resistance on ball trajectory</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="category-card">
                                <div class="category-header">
                                    <span class="category-icon">üßÆ</span>
                                    <h4>Advanced Problem Solving</h4>
                                </div>
                                <div class="category-content">
                                    <p><strong>Problem Set C:</strong> Complex scenarios requiring multi-step analysis and advanced mathematical techniques.</p>
                                    <ul class="problem-list">
                                        <li>üîÑ Projectile motion with changing initial conditions</li>
                                        <li>üìà Optimization problems for maximum range/height</li>
                                        <li>üéõÔ∏è Multi-variable analysis of launch parameters</li>
                                        <li>üèÜ Challenge problems integrating multiple concepts</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-actions">
                            <div class="assessment-cta">
                                <p class="cta-text">Practice makes perfect!</p>
                                <button class="btn btn-secondary assessment-start-btn" id="start-practice" aria-label="Start Week 2 Practice Problems">
                                    <span class="loading-spinner" style="display: none;" aria-hidden="true"></span>
                                    <span class="btn-icon">üéØ</span>
                                    <span class="btn-text">Start Practice Problems</span>
                                </button>
                                <p class="assessment-info">3 guided problems ‚Ä¢ Step-by-step solutions</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="lab-tab">
                    <div class="assessment-preview">
                        <div class="preview-header">
                            <h3>üî¨ Laboratory Experiment</h3>
                            <div class="lab-badges">
                                <span class="lab-badge data">Data Collection</span>
                                <span class="lab-badge analysis">Analysis</span>
                                <span class="lab-badge report">Report Writing</span>
                            </div>
                        </div>
                        
                        <div class="lab-overview">
                            <div class="lab-card">
                                <div class="lab-header">
                                    <span class="lab-icon">üéØ</span>
                                    <h4>Projectile Motion in Baseball</h4>
                                </div>
                                <div class="lab-content">
                                    <p><strong>Objective:</strong> Investigate how launch angle and initial velocity affect the trajectory of a projectile, using baseball as the experimental context.</p>
                                    
                                    <div class="lab-sections">
                                        <div class="lab-section">
                                            <h5>üìã Pre-Lab Preparation</h5>
                                            <ul>
                                                <li>Review projectile motion equations and vector analysis</li>
                                                <li>Set up data collection sheets for angle and velocity measurements</li>
                                                <li>Prepare graphing materials for trajectory plotting</li>
                                                <li>Safety briefing for projectile motion experiments</li>
                                            </ul>
                                        </div>
                                        
                                        <div class="lab-section">
                                            <h5>üî¨ Experimental Procedure</h5>
                                            <ul>
                                                <li>Measure initial velocity using radar gun or video analysis</li>
                                                <li>Record launch angles from 15¬∞ to 75¬∞ in 15¬∞ increments</li>
                                                <li>Document landing positions for range calculations</li>
                                                <li>Time flight duration for each trajectory</li>
                                                <li>Repeat measurements for statistical accuracy</li>
                                            </ul>
                                        </div>
                                        
                                        <div class="lab-section">
                                            <h5>üìä Data Analysis</h5>
                                            <ul>
                                                <li>Create trajectory plots comparing theoretical vs. experimental data</li>
                                                <li>Calculate percentage error between predicted and measured values</li>
                                                <li>Determine optimal launch angle for maximum range</li>
                                                <li>Analyze factors affecting experimental accuracy</li>
                                            </ul>
                                        </div>
                                        
                                        <div class="lab-section">
                                            <h5>üìù Lab Report Components</h5>
                                            <ul>
                                                <li>Introduction: Projectile motion theory and baseball applications</li>
                                                <li>Methods: Experimental setup and measurement procedures</li>
                                                <li>Results: Data tables, graphs, and statistical analysis</li>
                                                <li>Discussion: Comparison with theory and error analysis</li>
                                                <li>Conclusion: Key findings and real-world applications</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="assessment-actions">
                            <div class="assessment-cta">
                                <p class="cta-text">Ready for hands-on investigation?</p>
                                <button class="btn btn-accent assessment-start-btn" id="start-lab" aria-label="Start Week 2 Laboratory Investigation">
                                    <span class="loading-spinner" style="display: none;" aria-hidden="true"></span>
                                    <span class="btn-icon">üî¨</span>
                                    <span class="btn-text">Start Lab Investigation</span>
                                </button>
                                <p class="assessment-info">Data collection ‚Ä¢ Analysis ‚Ä¢ Report writing</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        <nav class="nav-sidebar">
            <div class="nav-header">
                <div class="nav-title">Physics of Baseball</div>
                <div class="nav-subtitle">Week 2: Understanding Projectile Motion</div>
            </div>

            <div class="home-nav">
                <a href="../index.html" class="home-link"><span>üè†</span><span>Course Home</span></a>
            </div>

            <div class="week-nav">
                <div class="nav-section-title">Weeks</div>
                <div class="week-links">
                    <a href="week-01.html" class="week-link"><span>1</span><span>Introduction to Motion</span></a>
                    <a href="week-02.html" class="week-link active"><span>2</span><span>Projectile Motion</span></a>
                    <a href="week-03.html" class="week-link"><span>3</span><span>Forces and Newton's Laws</span></a>
                    <a href="week-04.html" class="week-link"><span>4</span><span>Momentum and Impulse</span></a>
                    <a href="week-05.html" class="week-link"><span>5</span><span>Work and Energy</span></a>
                    <a href="week-06.html" class="week-link"><span>6</span><span>Circular Motion</span></a>
                    <a href="week-07.html" class="week-link"><span>7</span><span>Torque and Angular Momentum</span></a>
                    <a href="week-08.html" class="week-link"><span>8</span><span>Physics of Spin</span></a>
                    <a href="week-09.html" class="week-link"><span>9</span><span>Aerodynamics</span></a>
                    <a href="week-10.html" class="week-link"><span>10</span><span>Pitching Mechanics</span></a>
                    <a href="week-11.html" class="week-link"><span>11</span><span>Measurement and Data</span></a>
                    <a href="week-12.html" class="week-link"><span>12</span><span>Equipment Physics</span></a>
                    <a href="week-13.html" class="week-link"><span>13</span><span>Review and Application</span></a>
                </div>
            </div>

            <div class="daily-nav">
                <div class="nav-section-title">This Week</div>
                <div class="daily-links">
                    <a href="#day-1" class="daily-link"><span>üéØ</span><span>Introduction to Projectile Motion</span></a>
                    <a href="#day-2" class="daily-link"><span>üìê</span><span>Horizontal and Vertical Components</span></a>
                    <a href="#day-3" class="daily-link"><span>üìä</span><span>Kinematic Equations for Projectiles</span></a>
                    <a href="#day-4" class="daily-link"><span>üßÆ</span><span>Calculating Trajectories</span></a>
                    <a href="#day-5" class="daily-link"><span>‚öæ</span><span>Baseball Trajectory Analysis</span></a>
                </div>
            </div>
        </nav>
    </div>

    <script type="module" src="../js/main.js"></script>
    <script src="../js/week-template.js"></script>
    <script type="module">
        import { ProjectileCalculator } from '../js/calculators.js';
        import { EnhancedQuizSystem } from '../js/enhanced-assessment.js';
        import InteractiveLearningSystem from '../js/interactive-learning.js';

        // Initialize on DOM ready
        document.addEventListener('DOMContentLoaded', async function() {
            // Initialize projectile calculator
            const calculatorContainer = document.querySelector('.calculator-container');
            if (calculatorContainer) {
                calculatorContainer.innerHTML = '<div id="projectile-calculator"></div>';
                const projectileCalc = new ProjectileCalculator('projectile-calculator');
            }

            // Initialize enhanced assessment system
            const quizContainer = document.getElementById('quiz-content');
            if (quizContainer) {
                const enhancedAssessmentSystem = new EnhancedQuizSystem('quiz-content');
                await enhancedAssessmentSystem.createQuiz('week2');
                window.assessmentSystem = enhancedAssessmentSystem;
            }

            // Initialize interactive learning system
            window.interactiveLearningSystem = new InteractiveLearningSystem();
        });
        
        // Assessment button handlers
        document.addEventListener('DOMContentLoaded', function() {
            // Quiz functionality
            const startQuizBtn = document.getElementById('start-quiz');
            if (startQuizBtn) {
                startQuizBtn.addEventListener('click', async function() {
                    // Show loading state
                    const spinner = this.querySelector('.loading-spinner');
                    if (spinner) spinner.style.display = 'inline-block';
                    this.disabled = true;
                    
                    try {
                        // Replace the assessment preview with actual quiz
                        const quizTab = document.getElementById('quiz-tab');
                        quizTab.innerHTML = '<div id="week2-quiz-container"></div>';
                        
                        // Small delay to ensure DOM is ready
                        await new Promise(resolve => setTimeout(resolve, 100));
                        
                        // Initialize quiz system with container
                        const quizSystemInstance = new QuizSystem('week2-quiz-container');
                        await quizSystemInstance.createQuiz('week2');
                        
                        // Switch to quiz tab if not already active
                        document.querySelector('[data-tab="quiz"]').click();
                    } catch (error) {
                        console.error('Failed to load quiz:', error);
                        alert('Failed to load quiz. Please try again.');
                    } finally {
                        if (spinner) spinner.style.display = 'none';
                        this.disabled = false;
                    }
                });
            }
            
            // Practice problems functionality
            const startPracticeBtn = document.getElementById('start-practice');
            if (startPracticeBtn) {
                startPracticeBtn.addEventListener('click', function() {
                    const practiceTab = document.getElementById('practice-tab');
                    practiceTab.innerHTML = `
                        <div class="practice-problems">
                            <h3>üéØ Week 2 Practice Problems: Projectile Motion</h3>
                            <div class="problem-set">
                                <div class="problem-card">
                                    <h4>Problem 1: Baseball Trajectory</h4>
                                    <p>A baseball is hit at 45¬∞ with initial speed 35 m/s from height 1.2 m. Calculate:</p>
                                    <ol>
                                        <li>Time of flight</li>
                                        <li>Maximum height reached</li>
                                        <li>Horizontal range</li>
                                    </ol>
                                    <div class="solution-box">
                                        <p><strong>üí° Solution:</strong></p>
                                        <p><strong>Given:</strong> v‚ÇÄ = 35 m/s, Œ∏ = 45¬∞, h‚ÇÄ = 1.2 m</p>
                                        <p><strong>1. Velocity Components:</strong> v‚ÇÄ‚Çì = 35 cos(45¬∞) = 24.7 m/s, v‚ÇÄ·µß = 35 sin(45¬∞) = 24.7 m/s</p>
                                        <p><strong>2. Time of Flight:</strong> t = (v‚ÇÄ·µß + ‚àö(v‚ÇÄ·µß¬≤ + 2gh‚ÇÄ))/g = 5.17 s</p>
                                        <p><strong>3. Maximum Height:</strong> h = h‚ÇÄ + v‚ÇÄ·µß¬≤/(2g) = 32.3 m</p>
                                        <p><strong>4. Range:</strong> R = v‚ÇÄ‚Çì √ó t = 127.7 m</p>
                                    </div>
                                </div>
                                <!-- More problems would be added here -->
                            </div>
                        </div>
                    `;
                    
                    document.querySelector('[data-tab="practice"]').click();
                });
            }
            
            // Lab functionality
            const startLabBtn = document.getElementById('start-lab');
            if (startLabBtn) {
                startLabBtn.addEventListener('click', function() {
                    const labTab = document.getElementById('lab-tab');
                    labTab.innerHTML = `
                        <div class="lab-container">
                            <h3>üî¨ Week 2 Lab: Projectile Motion Experiment</h3>
                            <div class="lab-report-template">
                                <h4>Lab Report Template</h4>
                                <div class="lab-section">
                                    <h5>Objective</h5>
                                    <p>Investigate the relationship between launch angle, initial velocity, and projectile range using experimental data collection and theoretical predictions.</p>
                                </div>
                                <div class="lab-section">
                                    <h5>Materials</h5>
                                    <ul>
                                        <li>Projectile launcher or consistent throwing mechanism</li>
                                        <li>Measuring tape or rangefinder</li>
                                        <li>Protractor for angle measurement</li>
                                        <li>Radar gun or video analysis for velocity measurement</li>
                                        <li>Data collection sheets</li>
                                    </ul>
                                </div>
                                <div class="lab-section">
                                    <h5>Procedure</h5>
                                    <ol>
                                        <li>Set up launching mechanism at consistent height</li>
                                        <li>Launch projectiles at angles: 15¬∞, 30¬∞, 45¬∞, 60¬∞, 75¬∞</li>
                                        <li>Measure and record range for each angle (3 trials each)</li>
                                        <li>Record initial velocity and launch conditions</li>
                                        <li>Calculate theoretical ranges using projectile motion equations</li>
                                        <li>Compare experimental vs. theoretical results</li>
                                    </ol>
                                </div>
                                <div class="lab-section">
                                    <h5>Data Analysis</h5>
                                    <p>Create graphs comparing experimental and theoretical ranges. Calculate percentage error and discuss sources of experimental uncertainty.</p>
                                </div>
                            </div>
                        </div>
                    `;
                    document.querySelector('[data-tab="lab"]').click();
                });
            }
        });
        // Tab functionality
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons and content
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // Add active class to clicked button
                button.classList.add('active');
                
                // Show corresponding content
                const tabName = button.getAttribute('data-tab');
                const tabContent = document.getElementById(`${tabName}-tab`);
                if (tabContent) {
                    tabContent.classList.add('active');
                }
            });
        });
    </script>
    <script>
        // Week 2 specific JS - Projectile Motion Calculator
        document.addEventListener('DOMContentLoaded', function() {
            const velocitySlider = document.getElementById('velocity-slider');
            const angleSlider = document.getElementById('angle-slider');
            const heightSlider = document.getElementById('height-slider');
            const calculateBtn = document.getElementById('calculate-btn');
            
            const velocityDisplay = document.getElementById('velocity-display');
            const angleDisplay = document.getElementById('angle-display');
            const heightDisplay = document.getElementById('height-display');
            
            const timeResult = document.getElementById('time-result');
            const heightResult = document.getElementById('height-result');
            const rangeResult = document.getElementById('range-result');
            
            // Safety check - only proceed if calculator elements exist
            if (!velocitySlider || !angleSlider || !heightSlider || !calculateBtn) {
                console.log('Calculator elements not found, skipping calculator initialization');
                return;
            }
            
            function updateDisplays() {
                if (velocityDisplay) velocityDisplay.textContent = velocitySlider.value + ' m/s';
                if (angleDisplay) angleDisplay.textContent = angleSlider.value + '¬∞';
                if (heightDisplay) heightDisplay.textContent = heightSlider.value + ' m';
            }
            
            function calculateTrajectory() {
                const v0 = parseFloat(velocitySlider.value);
                const angleRad = parseFloat(angleSlider.value) * Math.PI / 180;
                const h0 = parseFloat(heightSlider.value);
                const g = 9.81;

                const v0x = v0 * Math.cos(angleRad);
                const v0y = v0 * Math.sin(angleRad);

                // Time of flight using quadratic formula
                const a = -0.5 * g;
                const b = v0y;
                const c = h0;
                const discriminant = b * b - 4 * a * c;
                const timeOfFlight = (-b - Math.sqrt(discriminant)) / (2 * a);

                // Maximum height and time to peak
                const maxHeight = h0 + (v0y * v0y) / (2 * g);
                const timeToPeak = v0y / g;

                // Range
                const range = v0x * timeOfFlight;

                // Impact analysis
                const impactVelocityY = v0y - g * timeOfFlight;
                const impactSpeed = Math.sqrt(v0x * v0x + impactVelocityY * impactVelocityY);
                const impactAngle = Math.atan2(-Math.abs(impactVelocityY), v0x) * 180 / Math.PI;

                // Efficiency compared to 45¬∞ optimal
                const optimalRange = (v0 * v0) / g; // Range at 45¬∞ from ground level
                const efficiency = (range / optimalRange) * 100;

                // Basic results
                if (timeResult) timeResult.textContent = timeOfFlight.toFixed(2) + ' s';
                if (heightResult) heightResult.textContent = maxHeight.toFixed(2) + ' m';
                if (rangeResult) rangeResult.textContent = range.toFixed(2) + ' m';

                // Advanced results
                const vxResult = document.getElementById('vx-result');
                const vyResult = document.getElementById('vy-result');
                const peakTimeResult = document.getElementById('peak-time-result');
                const peakHeightResult = document.getElementById('peak-height-result');
                const impactSpeedResult = document.getElementById('impact-speed-result');
                const impactAngleResult = document.getElementById('impact-angle-result');
                const efficiencyResult = document.getElementById('efficiency-result');
                const hangTimeResult = document.getElementById('hang-time-result');

                if (vxResult) vxResult.textContent = v0x.toFixed(2) + ' m/s';
                if (vyResult) vyResult.textContent = v0y.toFixed(2) + ' m/s';
                if (peakTimeResult) peakTimeResult.textContent = timeToPeak.toFixed(2) + ' s';
                if (peakHeightResult) peakHeightResult.textContent = maxHeight.toFixed(2) + ' m';
                if (impactSpeedResult) impactSpeedResult.textContent = impactSpeed.toFixed(2) + ' m/s';
                if (impactAngleResult) impactAngleResult.textContent = impactAngle.toFixed(1) + '¬∞';
                if (efficiencyResult) efficiencyResult.textContent = efficiency.toFixed(1) + '%';
                if (hangTimeResult) hangTimeResult.textContent = timeOfFlight.toFixed(2) + ' s';

                // Draw trajectory on canvas
                drawTrajectory(v0, angleRad, h0, timeOfFlight, range, maxHeight);
            }

            function drawTrajectory(v0, angleRad, h0, timeOfFlight, range, maxHeight) {
                const canvas = document.getElementById('trajectory-canvas');
                if (!canvas) return;

                const ctx = canvas.getContext('2d');
                const width = canvas.width;
                const height = canvas.height;

                // Clear canvas
                ctx.clearRect(0, 0, width, height);

                // Set up coordinate system (flip Y axis for physics)
                const maxRange = Math.max(range * 1.2, 50);
                const maxHeightDisplay = Math.max(maxHeight * 1.2, 10);

                const scaleX = width / maxRange;
                const scaleY = height / maxHeightDisplay;

                // Draw grid
                ctx.strokeStyle = '#e0e0e0';
                ctx.lineWidth = 1;
                for (let i = 0; i <= 10; i++) {
                    const x = (i / 10) * width;
                    const y = (i / 10) * height;
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, height);
                    ctx.moveTo(0, y);
                    ctx.lineTo(width, y);
                    ctx.stroke();
                }

                // Draw reference 45¬∞ trajectory (green)
                ctx.strokeStyle = '#4CAF50';
                ctx.lineWidth = 2;
                ctx.beginPath();
                const ref45Angle = Math.PI / 4;
                const ref45vx = v0 * Math.cos(ref45Angle);
                const ref45vy = v0 * Math.sin(ref45Angle);
                const ref45TimeOfFlight = 2 * ref45vy / 9.81; // From ground level

                for (let t = 0; t <= ref45TimeOfFlight; t += ref45TimeOfFlight / 100) {
                    const x = ref45vx * t;
                    const y = ref45vy * t - 0.5 * 9.81 * t * t;
                    if (y >= 0) {
                        const canvasX = x * scaleX;
                        const canvasY = height - y * scaleY;
                        if (t === 0) {
                            ctx.moveTo(canvasX, canvasY);
                        } else {
                            ctx.lineTo(canvasX, canvasY);
                        }
                    }
                }
                ctx.stroke();

                // Draw current trajectory (blue)
                ctx.strokeStyle = '#2196F3';
                ctx.lineWidth = 3;
                ctx.beginPath();

                const v0x = v0 * Math.cos(angleRad);
                const v0y = v0 * Math.sin(angleRad);

                for (let t = 0; t <= timeOfFlight; t += timeOfFlight / 100) {
                    const x = v0x * t;
                    const y = h0 + v0y * t - 0.5 * 9.81 * t * t;
                    if (y >= 0) {
                        const canvasX = x * scaleX;
                        const canvasY = height - y * scaleY;
                        if (t === 0) {
                            ctx.moveTo(canvasX, canvasY);
                        } else {
                            ctx.lineTo(canvasX, canvasY);
                        }
                    }
                }
                ctx.stroke();

                // Mark launch point
                ctx.fillStyle = '#FF4444';
                ctx.beginPath();
                ctx.arc(0, height - h0 * scaleY, 5, 0, 2 * Math.PI);
                ctx.fill();

                // Mark impact point
                ctx.fillStyle = '#FF4444';
                ctx.beginPath();
                ctx.arc(range * scaleX, height, 5, 0, 2 * Math.PI);
                ctx.fill();

                // Mark peak
                const peakTime = v0y / 9.81;
                const peakX = v0x * peakTime;
                ctx.fillStyle = '#FFA500';
                ctx.beginPath();
                ctx.arc(peakX * scaleX, height - maxHeight * scaleY, 4, 0, 2 * Math.PI);
                ctx.fill();

                // Add labels
                ctx.fillStyle = '#333';
                ctx.font = '12px Arial';
                ctx.fillText('Launch', 5, height - h0 * scaleY - 10);
                ctx.fillText('Impact', range * scaleX - 20, height - 5);
                ctx.fillText('Peak', peakX * scaleX - 15, height - maxHeight * scaleY - 10);
            }
            
            // Event listeners
            velocitySlider.addEventListener('input', updateDisplays);
            angleSlider.addEventListener('input', updateDisplays);
            heightSlider.addEventListener('input', updateDisplays);
            calculateBtn.addEventListener('click', calculateTrajectory);
            
            // Initial setup
            updateDisplays();
            calculateTrajectory();
        });
    </script>

    <style>
        /* Floating Table of Contents Styles */
        .floating-toc {
            position: fixed;
            top: 50%;
            right: -280px;
            transform: translateY(-50%);
            width: 300px;
            z-index: 1000;
            transition: right 0.3s ease;
            font-family: var(--font-family-system, system-ui);
        }

        .floating-toc.open {
            right: 0;
        }

        .toc-toggle {
            position: absolute;
            left: -50px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--color-primary, #1976d2);
            color: white;
            border: none;
            border-radius: 8px 0 0 8px;
            padding: 12px 8px;
            cursor: pointer;
            box-shadow: var(--shadow-elevation-2, 0 3px 6px rgba(0,0,0,0.15));
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            min-height: 80px;
            justify-content: center;
        }

        .toc-toggle:hover {
            background: var(--color-primary-hover, #1565c0);
            transform: translateY(-50%) scale(1.05);
        }

        .toc-icon {
            font-size: 1.2rem;
            line-height: 1;
        }

        .toc-text {
            font-size: 0.75rem;
            font-weight: 600;
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }

        .toc-content {
            background: var(--color-surface, white);
            border-radius: 12px 0 0 12px;
            box-shadow: var(--shadow-elevation-3, 0 10px 20px rgba(0,0,0,0.15));
            border: 1px solid var(--color-outline, #e0e0e0);
            border-right: none;
            max-height: 80vh;
            overflow-y: auto;
            padding: 0;
        }

        .toc-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid var(--color-outline-variant, #f0f0f0);
            background: var(--color-surface-elevated, #f8f9fa);
            border-radius: 12px 0 0 0;
        }

        .toc-header h3 {
            margin: 0;
            font-size: 1.1rem;
            color: var(--color-on-surface, #333);
            font-weight: 600;
        }

        .toc-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--color-on-surface-muted, #666);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .toc-close:hover {
            background: var(--color-outline-variant, #f0f0f0);
            color: var(--color-on-surface, #333);
        }

        .toc-list {
            list-style: none;
            padding: 16px 0;
            margin: 0;
        }

        .toc-list li {
            margin-bottom: 8px;
        }

        .toc-section {
            margin-bottom: 16px;
        }

        .toc-section-title {
            display: block;
            padding: 8px 20px;
            font-weight: 600;
            color: var(--color-on-surface-variant, #555);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .toc-subsection {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .toc-link {
            display: block;
            padding: 8px 20px 8px 36px;
            color: var(--color-on-surface, #333);
            text-decoration: none;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
            font-size: 0.9rem;
        }

        .toc-link:hover {
            background: var(--color-surface-container, #f5f5f5);
            border-left-color: var(--color-primary, #1976d2);
            color: var(--color-primary, #1976d2);
        }

        .toc-link.active {
            background: var(--color-primary, #1976d2);
            color: white;
            border-left-color: var(--color-primary, #1976d2);
            font-weight: 600;
        }


        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .floating-toc {
                right: -100vw;
                width: 100vw;
                top: 0;
                transform: none;
                height: 100vh;
                background: rgba(0, 0, 0, 0.5);
            }

            .floating-toc.open {
                right: 0;
            }

            .toc-toggle {
                left: -60px;
                padding: 16px 12px;
                min-height: 100px;
            }

            .toc-content {
                margin: 80px 20px 20px;
                border-radius: 12px;
                border: 1px solid var(--color-outline, #e0e0e0);
                max-height: calc(100vh - 120px);
            }

            .toc-header {
                border-radius: 12px 12px 0 0;
            }
        }

        /* Hide TOC on very small screens */
        @media (max-width: 480px) {
            .floating-toc {
                display: none;
            }
        }

        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            .floating-toc,
            .toc-toggle,
            .toc-link {
                transition: none;
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .toc-toggle {
                border: 2px solid currentColor;
            }

            .toc-content {
                border: 2px solid currentColor;
            }

            .toc-link:hover,
            .toc-link.active {
                outline: 2px solid currentColor;
            }
        }

        /* Progressive Disclosure Styles */
        .content-difficulty-selector {
            margin: 24px 0;
            background: var(--color-surface-elevated, #f8f9fa);
            border-radius: var(--radius-lg, 0.75rem);
            padding: 16px;
            border: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        .difficulty-tabs {
            display: flex;
            background: var(--color-surface, white);
            border-radius: var(--radius-md, 0.5rem);
            padding: 4px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .difficulty-tab {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 16px;
            background: transparent;
            border: none;
            border-radius: var(--radius-sm, 0.375rem);
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: var(--font-family-system, system-ui);
            font-weight: 500;
            color: var(--color-on-surface-muted, #666);
        }

        .difficulty-tab.active {
            background: var(--color-primary, #1976d2);
            color: white;
            box-shadow: var(--shadow-elevation-1, 0 1px 3px rgba(0,0,0,0.12));
            transform: translateY(-1px);
        }

        .difficulty-tab:hover:not(.active) {
            background: var(--color-surface-container, #f5f5f5);
            color: var(--color-on-surface, #333);
        }

        .tab-icon {
            font-size: 1.1rem;
            line-height: 1;
        }

        .tab-text {
            font-size: 0.9rem;
            font-weight: 600;
        }

        .difficulty-content {
            display: none;
            margin-top: 24px;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .difficulty-content.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* Basic Content Styles */
        .calculus-basics {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: var(--radius-lg, 0.75rem);
            padding: 24px;
            border: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        .basic-concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .basic-concept-card {
            background: var(--color-surface, white);
            border-radius: var(--radius-md, 0.5rem);
            padding: 20px;
            box-shadow: var(--shadow-elevation-1, 0 1px 3px rgba(0,0,0,0.12));
            border: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        .basic-concept-card h4 {
            color: var(--color-primary, #1976d2);
            margin-bottom: 12px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .example-box {
            background: var(--color-surface-elevated, #f8f9fa);
            border-left: 4px solid var(--color-accent, #4caf50);
            padding: 16px;
            margin-top: 16px;
            border-radius: 0 var(--radius-sm, 0.375rem) var(--radius-sm, 0.375rem) 0;
        }

        .example-box p {
            margin: 0;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .example-box p:not(:last-child) {
            margin-bottom: 8px;
        }

        /* Advanced Content Enhancements */
        .advanced-derivatives {
            border: 2px solid var(--color-secondary, #ffa726);
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        }

        .advanced-note {
            background: var(--color-surface, white);
            border: 1px solid var(--color-secondary, #ffa726);
            border-radius: var(--radius-sm, 0.375rem);
            padding: 16px;
            margin-top: 16px;
        }

        .advanced-note p {
            margin: 0;
            color: var(--color-on-surface, #333);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Responsive adjustments for difficulty tabs */
        @media (max-width: 600px) {
            .difficulty-tabs {
                flex-direction: column;
                gap: 4px;
            }

            .difficulty-tab {
                justify-content: flex-start;
                padding: 16px 20px;
            }

            .basic-concept-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
        }

        /* Animation for content transitions */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .difficulty-content.active {
            animation: fadeInUp 0.3s ease-out;
        }

        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            .difficulty-tab,
            .difficulty-content {
                transition: none;
            }

            .difficulty-content.active {
                animation: none;
            }
        }

        /* Focus styles for difficulty tabs */
        .difficulty-tab:focus {
            outline: 2px solid var(--color-primary, #1976d2);
            outline-offset: 2px;
        }

        /* High contrast support */
        @media (prefers-contrast: high) {
            .difficulty-tab {
                border: 1px solid currentColor;
            }

            .difficulty-tab.active {
                outline: 2px solid currentColor;
            }
        }

        /* Enhanced Calculator UI Styles */
        .enhanced-calculator {
            background: linear-gradient(135deg, #f8fffe 0%, #f0f9ff 100%);
            border: 2px solid var(--color-primary, #1976d2);
            box-shadow: var(--shadow-elevation-3, 0 10px 20px rgba(0,0,0,0.15));
        }

        .calculator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--color-outline-variant, #f0f0f0);
        }

        .calculator-header h4 {
            margin: 0;
            color: var(--color-primary, #1976d2);
            font-size: 1.3rem;
            font-weight: 600;
        }

        .calculator-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .info-icon {
            font-size: 1.2rem;
            cursor: help;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }

        .info-icon:hover {
            opacity: 1;
        }

        .live-indicator {
            font-size: 0.8rem;
            color: var(--color-accent, #4caf50);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .control-group {
            position: relative;
            margin-bottom: 24px;
            padding: 16px;
            background: var(--color-surface, white);
            border-radius: var(--radius-md, 0.5rem);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
            transition: all 0.2s ease;
        }

        .control-group:hover {
            border-color: var(--color-primary, #1976d2);
            box-shadow: 0 2px 8px rgba(25, 118, 210, 0.1);
        }

        .control-group[data-tooltip]:hover::before {
            content: attr(data-tooltip);
            position: absolute;
            top: -45px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: var(--radius-sm, 0.375rem);
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 1000;
            pointer-events: none;
        }

        .control-group[data-tooltip]:hover::after {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            pointer-events: none;
        }

        .control-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--color-on-surface, #333);
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--color-outline-variant, #f0f0f0);
            outline: none;
            margin: 12px 0;
            cursor: pointer;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary, #1976d2);
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: all 0.2s ease;
        }

        .control-group input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 3px 8px rgba(25, 118, 210, 0.4);
        }

        .control-indicators {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
        }

        .indicator-mark {
            font-size: 0.75rem;
            color: var(--color-on-surface-muted, #666);
            background: var(--color-surface-elevated, #f8f9fa);
            padding: 4px 8px;
            border-radius: var(--radius-sm, 0.375rem);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        .control-help {
            font-size: 0.8rem;
            color: var(--color-on-surface-muted, #666);
            font-style: italic;
            margin-top: 8px;
            padding: 8px;
            background: var(--color-surface-elevated, #f8f9fa);
            border-radius: var(--radius-sm, 0.375rem);
            border-left: 3px solid var(--color-primary, #1976d2);
        }

        .calculation-mode {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding: 16px;
            background: var(--color-surface-elevated, #f8f9fa);
            border-radius: var(--radius-md, 0.5rem);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        .calculation-mode-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .calculation-mode-label input[type="checkbox"] {
            display: none;
        }

        .checkmark {
            width: 20px;
            height: 20px;
            background: var(--color-surface, white);
            border: 2px solid var(--color-outline, #e0e0e0);
            border-radius: var(--radius-sm, 0.375rem);
            position: relative;
            transition: all 0.2s ease;
        }

        .calculation-mode-label input[type="checkbox"]:checked + .checkmark {
            background: var(--color-primary, #1976d2);
            border-color: var(--color-primary, #1976d2);
        }

        .calculation-mode-label input[type="checkbox"]:checked + .checkmark::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .calculate-button {
            background: var(--color-primary, #1976d2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: var(--radius-md, 0.5rem);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-elevation-1, 0 1px 3px rgba(0,0,0,0.12));
        }

        .calculate-button:hover {
            background: var(--color-primary-hover, #1565c0);
            transform: translateY(-1px);
            box-shadow: var(--shadow-elevation-2, 0 3px 6px rgba(0,0,0,0.15));
        }

        .calculate-button:active {
            transform: translateY(0);
        }

        .calculate-button:disabled {
            background: var(--color-outline, #e0e0e0);
            color: var(--color-on-surface-muted, #666);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Mobile responsiveness for enhanced calculator */
        @media (max-width: 768px) {
            .calculator-header {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }

            .calculation-mode {
                flex-direction: column;
                gap: 12px;
            }

            .control-group[data-tooltip]:hover::before {
                position: fixed;
                top: 20px;
                left: 20px;
                right: 20px;
                transform: none;
                text-align: center;
                white-space: normal;
            }

            .control-indicators {
                flex-wrap: wrap;
                gap: 8px;
            }

            .indicator-mark {
                flex: 1;
                text-align: center;
                min-width: 60px;
            }
        }

        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            .control-group,
            .calculate-button,
            .control-group input[type="range"]::-webkit-slider-thumb {
                transition: none;
            }
        }

        /* High contrast support */
        @media (prefers-contrast: high) {
            .enhanced-calculator {
                border: 3px solid currentColor;
            }

            .control-group:hover {
                outline: 2px solid currentColor;
            }
        }

        /* Learning Roadmap Styles (matching Week 1) */
        .week-roadmap-container {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: var(--radius-xl, 1rem);
            padding: var(--space-2xl, 2.618rem);
            margin: var(--space-2xl, 2.618rem) 0;
            border: 2px solid var(--color-primary, #1976d2);
            box-shadow: var(--shadow-elevation-3, 0 10px 20px rgba(0,0,0,0.15));
        }

        .roadmap-header {
            text-align: center;
            margin-bottom: var(--space-xl, 2.618rem);
        }

        .roadmap-title {
            font-size: var(--font-size-3xl, 1.875rem);
            font-weight: 700;
            color: var(--color-primary, #1976d2);
            margin: 0 0 var(--space-sm, 0.5rem) 0;
        }

        .roadmap-subtitle {
            font-size: var(--font-size-lg, 1.125rem);
            color: var(--color-on-surface-variant, #555);
            font-style: italic;
        }

        .learning-path {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg, 1.618rem);
            position: relative;
        }

        .learning-path::before {
            content: '';
            position: absolute;
            left: 32px;
            top: 60px;
            bottom: 60px;
            width: 3px;
            background: linear-gradient(to bottom, var(--color-primary, #1976d2), var(--color-accent, #4caf50));
            border-radius: 2px;
            z-index: 1;
        }

        .roadmap-step {
            display: flex;
            gap: var(--space-lg, 1.618rem);
            align-items: flex-start;
            position: relative;
            z-index: 2;
        }

        .step-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 64px;
            height: 64px;
            background: var(--color-surface, white);
            border: 3px solid var(--color-outline, #e0e0e0);
            border-radius: 50%;
            flex-shrink: 0;
            position: relative;
            transition: all 0.3s ease;
        }

        .roadmap-step.current .step-indicator {
            background: var(--color-primary, #1976d2);
            border-color: var(--color-primary, #1976d2);
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(25, 118, 210, 0.4);
        }

        .roadmap-step.completed .step-indicator {
            background: var(--color-accent, #4caf50);
            border-color: var(--color-accent, #4caf50);
        }

        .step-number {
            font-size: var(--font-size-sm, 0.875rem);
            font-weight: 700;
            color: var(--color-on-surface-muted, #666);
        }

        .roadmap-step.current .step-number,
        .roadmap-step.completed .step-number {
            color: white;
        }

        .step-icon {
            font-size: var(--font-size-lg, 1.125rem);
            margin-top: 2px;
        }

        .step-content {
            flex: 1;
            background: var(--color-surface, white);
            border-radius: var(--radius-lg, 0.75rem);
            padding: var(--space-lg, 1.618rem);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
            box-shadow: var(--shadow-elevation-1, 0 1px 3px rgba(0,0,0,0.12));
            transition: all 0.3s ease;
        }

        .roadmap-step.current .step-content {
            border-color: var(--color-primary, #1976d2);
            box-shadow: 0 4px 16px rgba(25, 118, 210, 0.15);
            transform: translateY(-2px);
        }

        .step-title {
            font-size: var(--font-size-xl, 1.25rem);
            font-weight: 600;
            color: var(--color-on-surface, #333);
            margin: 0 0 var(--space-sm, 0.5rem) 0;
        }

        .roadmap-step.current .step-title {
            color: var(--color-primary, #1976d2);
        }

        .step-description {
            font-size: var(--font-size-base, 1rem);
            color: var(--color-on-surface-variant, #555);
            margin: 0 0 var(--space-md, 1rem) 0;
            line-height: 1.5;
        }

        .step-concepts {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm, 0.5rem);
        }

        .concept-tag {
            background: var(--color-surface-elevated, #f8f9fa);
            color: var(--color-on-surface-variant, #555);
            padding: var(--space-xs, 0.25rem) var(--space-sm, 0.5rem);
            border-radius: var(--radius-md, 0.5rem);
            font-size: var(--font-size-sm, 0.875rem);
            font-weight: 500;
            border: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        .roadmap-step.current .concept-tag {
            background: var(--color-primary, #1976d2);
            color: white;
            border-color: var(--color-primary, #1976d2);
        }

        .roadmap-footer {
            margin-top: var(--space-xl, 2.618rem);
            text-align: center;
        }

        .learning-tip {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm, 0.5rem);
            background: var(--color-surface, white);
            padding: var(--space-md, 1rem) var(--space-lg, 1.618rem);
            border-radius: var(--radius-lg, 0.75rem);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
            box-shadow: var(--shadow-elevation-1, 0 1px 3px rgba(0,0,0,0.12));
        }

        .tip-icon {
            font-size: var(--font-size-lg, 1.125rem);
        }

        .tip-text {
            font-size: var(--font-size-base, 1rem);
            color: var(--color-on-surface-variant, #555);
            font-style: italic;
        }

        /* Mini roadmap in TOC */
        .toc-roadmap {
            padding: 16px 20px;
            border-top: 1px solid var(--color-outline-variant, #f0f0f0);
            background: var(--color-surface-elevated, #f8f9fa);
        }

        .toc-roadmap .roadmap-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--color-on-surface, #333);
            margin: 0 0 12px 0;
        }

        .mini-roadmap {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .mini-step {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border-radius: var(--radius-sm, 0.375rem);
            transition: all 0.2s ease;
            cursor: pointer;
            border: 1px solid transparent;
        }

        .mini-step:hover {
            background: var(--color-surface-container, #f5f5f5);
        }

        .mini-step.current {
            background: var(--color-primary, #1976d2);
            color: white;
            border-color: var(--color-primary, #1976d2);
        }

        .mini-step.completed {
            background: var(--color-accent, #4caf50);
            color: white;
            opacity: 0.8;
        }

        .mini-step-icon {
            font-size: 1rem;
            width: 20px;
            text-align: center;
        }

        .mini-step-text {
            font-size: 0.85rem;
            font-weight: 500;
        }

        /* Mobile responsiveness for roadmap */
        @media (max-width: 768px) {
            .week-roadmap-container {
                padding: var(--space-lg, 1.618rem);
                margin: var(--space-lg, 1.618rem) 0;
            }

            .learning-path::before {
                left: 24px;
            }

            .step-indicator {
                width: 48px;
                height: 48px;
            }

            .roadmap-step {
                gap: var(--space-md, 1rem);
            }

            .step-content {
                padding: var(--space-md, 1rem);
            }

            .step-title {
                font-size: var(--font-size-lg, 1.125rem);
            }

            .step-description {
                font-size: var(--font-size-sm, 0.875rem);
            }

            .concept-tag {
                font-size: var(--font-size-xs, 0.75rem);
            }
        }

        /* Accessibility improvements for roadmap */
        @media (prefers-reduced-motion: reduce) {
            .step-indicator,
            .step-content,
            .mini-step {
                transition: none;
            }

            .roadmap-step.current .step-indicator {
                transform: none;
            }
        }

        /* High contrast support for roadmap */
        @media (prefers-contrast: high) {
            .step-indicator,
            .step-content,
            .concept-tag {
                border: 2px solid currentColor;
            }

            .roadmap-step.current .step-content {
                outline: 2px solid currentColor;
            }
        }

        /* Enhanced Motion Components Analysis Styles */
        .enhanced-components-section {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: var(--radius-xl, 1rem);
            padding: var(--space-2xl, 2.618rem);
            margin: var(--space-xl, 2.618rem) 0;
            border: 2px solid var(--color-primary, #1976d2);
            box-shadow: var(--shadow-elevation-3, 0 10px 20px rgba(0,0,0,0.15));
        }

        .section-description {
            text-align: center;
            font-size: var(--font-size-lg, 1.125rem);
            color: var(--color-on-surface-variant, #555);
            margin: 0 0 var(--space-xl, 2.618rem) 0;
            font-style: italic;
        }

        /* Component Visualizer */
        .component-visualizer {
            background: var(--color-surface, white);
            border-radius: var(--radius-lg, 0.75rem);
            padding: var(--space-lg, 1.618rem);
            margin-bottom: var(--space-xl, 2.618rem);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
            box-shadow: var(--shadow-elevation-2, 0 3px 6px rgba(0,0,0,0.15));
        }

        .visualizer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg, 1.618rem);
            flex-wrap: wrap;
            gap: var(--space-md, 1rem);
        }

        .visualizer-header h4 {
            margin: 0;
            color: var(--color-primary, #1976d2);
            font-weight: 600;
        }

        .visualizer-controls {
            display: flex;
            gap: var(--space-sm, 0.5rem);
            background: var(--color-surface-elevated, #f8f9fa);
            border-radius: var(--radius-md, 0.5rem);
            padding: 4px;
        }

        .viz-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: var(--radius-sm, 0.375rem);
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
            color: var(--color-on-surface-muted, #666);
        }

        .viz-btn.active {
            background: var(--color-primary, #1976d2);
            color: white;
            box-shadow: var(--shadow-elevation-1, 0 1px 3px rgba(0,0,0,0.12));
        }

        .viz-btn:hover:not(.active) {
            background: var(--color-surface-container, #f5f5f5);
            color: var(--color-on-surface, #333);
        }

        /* Component Canvas */
        .component-canvas {
            background: linear-gradient(135deg, #e8f4fd 0%, #f0f9ff 100%);
            border-radius: var(--radius-md, 0.5rem);
            padding: var(--space-lg, 1.618rem);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        .baseball-trajectory-demo {
            position: relative;
            height: 300px;
            margin-bottom: var(--space-lg, 1.618rem);
        }

        .trajectory-grid {
            position: relative;
            height: 100%;
            background:
                linear-gradient(90deg, rgba(25, 118, 210, 0.1) 1px, transparent 1px),
                linear-gradient(rgba(25, 118, 210, 0.1) 1px, transparent 1px);
            background-size: 30px 30px;
            border-radius: var(--radius-sm, 0.375rem);
            overflow: hidden;
        }

        .animated-baseball {
            position: absolute;
            font-size: 1.5rem;
            transition: all 0.1s linear;
            z-index: 10;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
            left: 20px;
            top: 80%;
        }

        .vector-display {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }

        .horizontal-vector, .vertical-vector {
            position: absolute;
            display: flex;
            align-items: center;
        }

        .vector-arrow {
            width: 0;
            height: 0;
            border-style: solid;
        }

        .horizontal-arrow {
            border-left: 20px solid var(--color-primary, #1976d2);
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
        }

        .vertical-arrow {
            border-bottom: 20px solid var(--color-accent, #4caf50);
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
        }

        .vector-label {
            margin-left: 8px;
            background: rgba(255, 255, 255, 0.9);
            padding: 4px 8px;
            border-radius: var(--radius-sm, 0.375rem);
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--color-on-surface, #333);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        /* Demo Controls */
        .demo-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: var(--space-lg, 1.618rem);
            flex-wrap: wrap;
        }

        .demo-control-group {
            display: flex;
            align-items: center;
            gap: var(--space-sm, 0.5rem);
        }

        .demo-control-group label {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--color-on-surface, #333);
        }

        .demo-control-group input[type="range"] {
            width: 120px;
        }

        .demo-btn {
            padding: 8px 16px;
            border: 1px solid var(--color-outline, #e0e0e0);
            background: var(--color-surface, white);
            border-radius: var(--radius-sm, 0.375rem);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .demo-btn:hover {
            background: var(--color-surface-elevated, #f8f9fa);
            border-color: var(--color-primary, #1976d2);
        }

        /* Enhanced Component Comparison */
        .enhanced-concept-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: var(--space-lg, 1.618rem);
            margin: var(--space-xl, 2.618rem) 0;
        }

        .component-card {
            background: var(--color-surface, white);
            border-radius: var(--radius-lg, 0.75rem);
            overflow: hidden;
            box-shadow: var(--shadow-elevation-2, 0 3px 6px rgba(0,0,0,0.15));
            border: 1px solid var(--color-outline-variant, #f0f0f0);
            transition: all 0.3s ease;
        }

        .component-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-elevation-3, 0 10px 20px rgba(0,0,0,0.15));
        }

        .horizontal-card {
            border-top: 4px solid var(--color-primary, #1976d2);
        }

        .vertical-card {
            border-top: 4px solid var(--color-accent, #4caf50);
        }

        .card-header {
            background: linear-gradient(135deg, var(--color-surface-elevated, #f8f9fa), var(--color-surface, white));
            padding: var(--space-lg, 1.618rem);
            display: flex;
            align-items: center;
            gap: var(--space-md, 1rem);
        }

        .component-icon {
            font-size: var(--font-size-2xl, 1.5rem);
        }

        .card-header h4 {
            margin: 0;
            flex: 1;
            font-weight: 600;
            color: var(--color-on-surface, #333);
        }

        .motion-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .horizontal-indicator {
            background: var(--color-primary, #1976d2);
        }

        .vertical-indicator {
            background: var(--color-accent, #4caf50);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }

        .card-content {
            padding: var(--space-lg, 1.618rem);
        }

        .motion-properties {
            margin-bottom: var(--space-lg, 1.618rem);
        }

        .property-item {
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: var(--space-sm, 0.5rem);
            align-items: baseline;
            padding: var(--space-sm, 0.5rem) 0;
            border-bottom: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        .property-item:last-child {
            border-bottom: none;
        }

        .property-label {
            font-weight: 600;
            color: var(--color-on-surface-variant, #555);
            white-space: nowrap;
        }

        .property-value {
            font-family: var(--font-family-mono, monospace);
            background: var(--color-surface-elevated, #f8f9fa);
            padding: 4px 8px;
            border-radius: var(--radius-sm, 0.375rem);
            font-weight: 600;
            color: var(--color-on-surface, #333);
        }

        .property-value.highlighted {
            background: var(--color-primary, #1976d2);
            color: white;
        }

        .property-note {
            font-size: 0.8rem;
            color: var(--color-on-surface-muted, #666);
            font-style: italic;
        }

        .physics-insight {
            background: linear-gradient(135deg, #e8f4fd 0%, #f0f9ff 100%);
            border-radius: var(--radius-md, 0.5rem);
            padding: var(--space-md, 1rem);
            border-left: 4px solid var(--color-primary, #1976d2);
        }

        .insight-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm, 0.5rem);
            margin-bottom: var(--space-sm, 0.5rem);
            color: var(--color-primary, #1976d2);
        }

        .insight-icon {
            font-size: 1.1rem;
        }

        /* Independence Demonstration */
        .independence-demonstration {
            background: var(--color-surface, white);
            border-radius: var(--radius-lg, 0.75rem);
            padding: var(--space-xl, 2.618rem);
            margin: var(--space-xl, 2.618rem) 0;
            border: 2px solid var(--color-outline-variant, #f0f0f0);
            box-shadow: var(--shadow-elevation-1, 0 1px 3px rgba(0,0,0,0.12));
        }

        .independence-demonstration h4 {
            text-align: center;
            color: var(--color-primary, #1976d2);
            margin-bottom: var(--space-lg, 1.618rem);
        }

        .independence-cards {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-lg, 1.618rem);
            flex-wrap: wrap;
        }

        .independence-card {
            background: var(--color-surface-elevated, #f8f9fa);
            border-radius: var(--radius-md, 0.5rem);
            padding: var(--space-lg, 1.618rem);
            text-align: center;
            border: 1px solid var(--color-outline-variant, #f0f0f0);
            flex: 1;
            min-width: 200px;
            max-width: 250px;
        }

        .result-card {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-color: var(--color-secondary, #ffa726);
        }

        .independence-card h5 {
            margin: 0 0 var(--space-md, 1rem) 0;
            color: var(--color-on-surface, #333);
            font-weight: 600;
        }

        .motion-graph {
            width: 100%;
            height: 80px;
            background: var(--color-surface, white);
            border-radius: var(--radius-sm, 0.375rem);
            margin: var(--space-md, 1rem) 0;
            position: relative;
            border: 1px solid var(--color-outline-variant, #f0f0f0);
            overflow: hidden;
        }

        .graph-line {
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 2px;
            transform: translateY(-50%);
        }

        .straight-line {
            background: var(--color-primary, #1976d2);
            transform: translateY(-50%) rotate(-5deg);
        }

        .curved-line {
            background: var(--color-accent, #4caf50);
            border-radius: 50px 50px 0 0;
            height: 30px;
            transform: translateY(-80%);
        }

        .parabolic-line {
            background: var(--color-secondary, #ffa726);
            border-radius: 0 100px 100px 0;
            height: 40px;
            transform: translateY(-90%);
        }

        .graph-labels {
            position: absolute;
            bottom: 4px;
            right: 4px;
            font-size: 0.7rem;
            color: var(--color-on-surface-muted, #666);
        }

        .plus-symbol, .equals-symbol {
            font-size: var(--font-size-2xl, 1.5rem);
            font-weight: bold;
            color: var(--color-primary, #1976d2);
            align-self: center;
        }

        /* Mobile responsiveness for components */
        @media (max-width: 768px) {
            .enhanced-components-section {
                padding: var(--space-lg, 1.618rem);
                margin: var(--space-lg, 1.618rem) 0;
            }

            .visualizer-header {
                flex-direction: column;
                align-items: stretch;
                text-align: center;
            }

            .enhanced-concept-comparison {
                grid-template-columns: 1fr;
                gap: var(--space-md, 1rem);
            }

            .independence-cards {
                flex-direction: column;
                gap: var(--space-md, 1rem);
            }

            .plus-symbol, .equals-symbol {
                transform: rotate(90deg);
            }

            .demo-controls {
                flex-direction: column;
                gap: var(--space-md, 1rem);
            }

            .baseball-trajectory-demo {
                height: 200px;
            }
        }

        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            .component-card,
            .motion-indicator,
            .animated-baseball {
                transition: none;
                animation: none;
            }
        }

        /* High contrast support */
        @media (prefers-contrast: high) {
            .component-card,
            .independence-card,
            .motion-graph {
                border: 2px solid currentColor;
            }
        }


        /* Enhanced Vector Analysis Styles */
        .enhanced-vector-analysis {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: var(--radius-xl, 1rem);
            padding: var(--space-2xl, 2.618rem);
            margin: var(--space-xl, 2.618rem) 0;
            border: 2px solid var(--color-secondary, #ffa726);
            box-shadow: var(--shadow-elevation-3, 0 10px 20px rgba(0,0,0,0.15));
        }

        .vector-intro {
            text-align: center;
            font-size: var(--font-size-lg, 1.125rem);
            color: var(--color-on-surface-variant, #555);
            margin: 0 0 var(--space-xl, 2.618rem) 0;
            font-style: italic;
        }

        /* Vector Visualization Container */
        .vector-visualization-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-xl, 2.618rem);
            margin-bottom: var(--space-xl, 2.618rem);
            background: var(--color-surface, white);
            border-radius: var(--radius-lg, 0.75rem);
            padding: var(--space-lg, 1.618rem);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
            box-shadow: var(--shadow-elevation-2, 0 3px 6px rgba(0,0,0,0.15));
        }

        /* Vector Controls Panel */
        .vector-controls-panel {
            background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
            border-radius: var(--radius-md, 0.5rem);
            padding: var(--space-lg, 1.618rem);
            border: 1px solid var(--color-secondary, #ffa726);
        }

        .vector-controls-panel h5 {
            margin: 0 0 var(--space-md, 1rem) 0;
            color: var(--color-secondary, #ffa726);
            font-weight: 600;
        }

        .vector-control-group {
            margin-bottom: var(--space-lg, 1.618rem);
        }

        .vector-control-group:last-child {
            margin-bottom: 0;
        }

        .vector-control-group label {
            display: block;
            font-weight: 600;
            margin-bottom: var(--space-sm, 0.5rem);
            color: var(--color-on-surface, #333);
        }

        .vector-control-group input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--color-outline-variant, #f0f0f0);
            outline: none;
            margin: var(--space-sm, 0.5rem) 0;
            cursor: pointer;
        }

        .vector-control-group input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-secondary, #ffa726);
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: all 0.2s ease;
        }

        .vector-control-group input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 3px 8px rgba(255, 167, 38, 0.4);
        }

        .speed-indicators, .angle-indicators {
            display: flex;
            justify-content: space-between;
            margin-top: var(--space-sm, 0.5rem);
        }

        .speed-mark, .angle-mark {
            font-size: 0.75rem;
            color: var(--color-on-surface-muted, #666);
            background: var(--color-surface, white);
            padding: 4px 8px;
            border-radius: var(--radius-sm, 0.375rem);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
            font-weight: 500;
        }

        /* Vector Diagram */
        .vector-diagram-container {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: var(--radius-md, 0.5rem);
            padding: var(--space-lg, 1.618rem);
            border: 1px solid var(--color-primary, #1976d2);
        }

        .vector-diagram {
            text-align: center;
            margin-bottom: var(--space-md, 1rem);
        }

        .vector-diagram svg {
            max-width: 100%;
            height: auto;
            border-radius: var(--radius-sm, 0.375rem);
            background: var(--color-surface, white);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        .axis-label {
            font-size: 14px;
            font-weight: 600;
            fill: #64748b;
        }

        .vector-label {
            font-size: 16px;
            font-weight: bold;
            text-anchor: middle;
        }

        .vector-label.main-vector {
            fill: #1976d2;
        }

        .vector-label.component-x {
            fill: #ef4444;
        }

        .vector-label.component-y {
            fill: #22c55e;
        }

        /* Vector Calculations */
        .vector-calculations {
            margin-top: var(--space-md, 1rem);
        }

        .vector-calculations h5 {
            margin: 0 0 var(--space-md, 1rem) 0;
            color: var(--color-primary, #1976d2);
            font-weight: 600;
        }

        .calc-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-sm, 0.5rem);
        }

        .calc-item {
            display: flex;
            justify-content: space-between;
            padding: var(--space-sm, 0.5rem);
            background: var(--color-surface, white);
            border-radius: var(--radius-sm, 0.375rem);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        .calc-label {
            font-weight: 600;
            color: var(--color-on-surface-variant, #555);
        }

        .calc-value {
            font-family: var(--font-family-mono, monospace);
            font-weight: 700;
            color: var(--color-on-surface, #333);
        }

        .calc-value.component-x {
            color: #ef4444;
        }

        .calc-value.component-y {
            color: #22c55e;
        }

        /* Vector Evolution Section */
        .vector-evolution-section {
            background: var(--color-surface, white);
            border-radius: var(--radius-lg, 0.75rem);
            padding: var(--space-xl, 2.618rem);
            margin: var(--space-xl, 2.618rem) 0;
            border: 2px solid var(--color-accent, #4caf50);
            box-shadow: var(--shadow-elevation-2, 0 3px 6px rgba(0,0,0,0.15));
        }

        .vector-evolution-section h5 {
            text-align: center;
            color: var(--color-accent, #4caf50);
            margin-bottom: var(--space-lg, 1.618rem);
            font-weight: 600;
        }

        .timeline-controls {
            display: flex;
            align-items: center;
            gap: var(--space-md, 1rem);
            margin-bottom: var(--space-xl, 2.618rem);
            padding: var(--space-lg, 1.618rem);
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-radius: var(--radius-md, 0.5rem);
            border: 1px solid var(--color-accent, #4caf50);
            flex-wrap: wrap;
        }

        .timeline-controls label {
            font-weight: 600;
            color: var(--color-on-surface, #333);
            white-space: nowrap;
        }

        .timeline-controls input[type="range"] {
            flex: 1;
            min-width: 200px;
            height: 8px;
            border-radius: 4px;
            background: var(--color-outline-variant, #f0f0f0);
            outline: none;
            cursor: pointer;
        }

        .timeline-controls input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-accent, #4caf50);
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: all 0.2s ease;
        }

        .evolution-btn {
            padding: 8px 16px;
            border: 1px solid var(--color-accent, #4caf50);
            background: var(--color-surface, white);
            border-radius: var(--radius-sm, 0.375rem);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .evolution-btn:hover {
            background: var(--color-accent, #4caf50);
            color: white;
        }

        /* Evolution Cards */
        .evolution-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-lg, 1.618rem);
        }

        .evolution-card {
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
            border-radius: var(--radius-md, 0.5rem);
            padding: var(--space-lg, 1.618rem);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
            transition: all 0.3s ease;
        }

        .evolution-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-elevation-2, 0 3px 6px rgba(0,0,0,0.15));
        }

        .horizontal-evolution {
            border-top: 4px solid #ef4444;
        }

        .vertical-evolution {
            border-top: 4px solid #22c55e;
        }

        .resultant-evolution {
            border-top: 4px solid #1976d2;
        }

        .evolution-card h6 {
            margin: 0 0 var(--space-sm, 0.5rem) 0;
            font-weight: 600;
            color: var(--color-on-surface, #333);
        }

        .evolution-equation {
            font-family: var(--font-family-mono, monospace);
            background: var(--color-surface, white);
            padding: var(--space-sm, 0.5rem);
            border-radius: var(--radius-sm, 0.375rem);
            margin: var(--space-sm, 0.5rem) 0;
            font-weight: 600;
            border: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        .evolution-description {
            font-size: 0.9rem;
            color: var(--color-on-surface-variant, #555);
            font-style: italic;
            margin-bottom: var(--space-md, 1rem);
        }

        .evolution-visual {
            height: 60px;
            background: var(--color-surface, white);
            border-radius: var(--radius-sm, 0.375rem);
            border: 1px solid var(--color-outline-variant, #f0f0f0);
            position: relative;
            overflow: hidden;
        }

        .constant-line {
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 3px;
            background: #ef4444;
            transform: translateY(-50%);
        }

        .linear-line {
            position: absolute;
            top: 10%;
            left: 10%;
            right: 10%;
            bottom: 50%;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            transform: skew(-20deg);
        }

        .curved-line {
            position: absolute;
            top: 20%;
            left: 10%;
            right: 10%;
            bottom: 20%;
            background: #1976d2;
            border-radius: 50% 50% 0 50%;
        }

        /* Baseball Applications */
        .baseball-applications {
            background: linear-gradient(135deg, #fefbff 0%, #f3e8ff 100%);
            border-radius: var(--radius-lg, 0.75rem);
            padding: var(--space-xl, 2.618rem);
            margin: var(--space-xl, 2.618rem) 0;
            border: 2px solid var(--color-tertiary, #9c27b0);
            box-shadow: var(--shadow-elevation-2, 0 3px 6px rgba(0,0,0,0.15));
        }

        .baseball-applications h5 {
            text-align: center;
            color: var(--color-tertiary, #9c27b0);
            margin-bottom: var(--space-lg, 1.618rem);
            font-weight: 600;
        }

        .application-scenarios {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-lg, 1.618rem);
        }

        .scenario-card {
            background: var(--color-surface, white);
            border-radius: var(--radius-md, 0.5rem);
            overflow: hidden;
            box-shadow: var(--shadow-elevation-1, 0 1px 3px rgba(0,0,0,0.12));
            border: 1px solid var(--color-outline-variant, #f0f0f0);
            transition: all 0.3s ease;
        }

        .scenario-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-elevation-3, 0 10px 20px rgba(0,0,0,0.15));
        }

        .scenario-header {
            background: linear-gradient(135deg, var(--color-surface-elevated, #f8f9fa), var(--color-surface, white));
            padding: var(--space-md, 1rem);
            display: flex;
            align-items: center;
            gap: var(--space-sm, 0.5rem);
            border-bottom: 1px solid var(--color-outline-variant, #f0f0f0);
        }

        .scenario-icon {
            font-size: var(--font-size-xl, 1.25rem);
        }

        .scenario-header h6 {
            margin: 0;
            font-weight: 600;
            color: var(--color-on-surface, #333);
        }

        .scenario-content {
            padding: var(--space-md, 1rem);
        }

        .scenario-content p {
            margin: 0 0 var(--space-sm, 0.5rem) 0;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .scenario-calculation {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            padding: var(--space-sm, 0.5rem);
            border-radius: var(--radius-sm, 0.375rem);
            margin-top: var(--space-sm, 0.5rem);
            border-left: 4px solid var(--color-primary, #1976d2);
            font-family: var(--font-family-mono, monospace);
            font-size: 0.85rem;
        }

        .scenario-calculation span {
            display: block;
            margin: 2px 0;
        }

        .scenario-calculation span:first-child {
            font-weight: 600;
            color: var(--color-on-surface, #333);
        }

        .scenario-calculation span:last-child {
            color: var(--color-primary, #1976d2);
            font-weight: 700;
        }

        /* Mobile responsiveness for vector analysis */
        @media (max-width: 768px) {
            .enhanced-vector-analysis {
                padding: var(--space-lg, 1.618rem);
                margin: var(--space-lg, 1.618rem) 0;
            }

            .vector-visualization-container {
                grid-template-columns: 1fr;
                gap: var(--space-lg, 1.618rem);
            }

            .timeline-controls {
                flex-direction: column;
                gap: var(--space-sm, 0.5rem);
                align-items: stretch;
            }

            .timeline-controls input[type="range"] {
                min-width: auto;
            }

            .evolution-cards {
                grid-template-columns: 1fr;
                gap: var(--space-md, 1rem);
            }

            .application-scenarios {
                grid-template-columns: 1fr;
                gap: var(--space-md, 1rem);
            }

            .calc-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            .evolution-card,
            .scenario-card,
            .vector-control-group input[type="range"]::-webkit-slider-thumb {
                transition: none;
            }
        }

        /* High contrast support */
        @media (prefers-contrast: high) {
            .evolution-card,
            .scenario-card,
            .vector-controls-panel {
                border: 2px solid currentColor;
            }
        }

        /* Key Trajectory Formulas Styling */
        .formula-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: var(--space-lg, 1.618rem);
            margin: var(--space-xl, 2rem) 0;
        }

        .formula-card {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid var(--color-primary, #1976d2);
            border-radius: var(--radius-lg, 0.75rem);
            padding: var(--space-lg, 1.618rem);
            box-shadow: var(--shadow-elevation-2, 0 4px 8px rgba(25, 118, 210, 0.1));
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .formula-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--color-primary, #1976d2), var(--color-secondary, #ffa726));
        }

        .formula-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-elevation-3, 0 8px 16px rgba(25, 118, 210, 0.15));
            border-color: var(--color-secondary, #ffa726);
        }

        .formula-card h5 {
            color: var(--color-primary, #1976d2);
            font-size: var(--font-size-lg, 1.125rem);
            font-weight: 600;
            margin: 0 0 var(--space-md, 1rem) 0;
            display: flex;
            align-items: center;
            gap: var(--space-sm, 0.5rem);
        }

        .formula-card h5::before {
            content: 'üìê';
            font-size: 1.2em;
        }

        .formula-card p {
            margin: var(--space-sm, 0.5rem) 0;
            line-height: 1.6;
        }

        .formula-card p strong {
            color: var(--color-on-surface, #333);
            font-weight: 600;
        }

        .formula-card sub {
            font-size: 0.75em;
            color: var(--color-primary, #1976d2);
        }

        .formula-note {
            font-style: italic;
            color: var(--color-on-surface-variant, #666) !important;
            font-size: 0.9em;
            margin-top: var(--space-md, 1rem) !important;
            padding: var(--space-sm, 0.5rem);
            background: rgba(25, 118, 210, 0.05);
            border-radius: var(--radius-sm, 0.25rem);
            border-left: 3px solid var(--color-primary, #1976d2);
        }

        /* Real-World Considerations Styling */
        .real-world-factors {
            margin: var(--space-2xl, 2.618rem) 0;
            background: linear-gradient(135deg, #fefbef 0%, #fef3c7 100%);
            border-radius: var(--radius-xl, 1rem);
            padding: var(--space-xl, 2rem);
            border: 2px solid var(--color-secondary, #ffa726);
            box-shadow: var(--shadow-elevation-2, 0 4px 8px rgba(255, 167, 38, 0.1));
        }

        .real-world-factors h4 {
            color: var(--color-secondary, #ffa726);
            font-size: var(--font-size-xl, 1.25rem);
            font-weight: 700;
            margin: 0 0 var(--space-lg, 1.618rem) 0;
            text-align: center;
        }

        .factor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-lg, 1.618rem);
        }

        .factor-item {
            background: var(--color-surface, white);
            border-radius: var(--radius-lg, 0.75rem);
            padding: var(--space-lg, 1.618rem);
            display: flex;
            gap: var(--space-md, 1rem);
            box-shadow: var(--shadow-elevation-1, 0 2px 4px rgba(0, 0, 0, 0.1));
            border: 1px solid rgba(255, 167, 38, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .factor-item:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-elevation-2, 0 4px 8px rgba(255, 167, 38, 0.15));
            border-color: var(--color-secondary, #ffa726);
        }

        .factor-icon {
            font-size: 2rem;
            flex-shrink: 0;
            display: flex;
            align-items: flex-start;
            padding-top: 0.25rem;
        }

        .factor-content h5 {
            color: var(--color-on-surface, #333);
            font-size: var(--font-size-md, 1rem);
            font-weight: 600;
            margin: 0 0 var(--space-sm, 0.5rem) 0;
        }

        .factor-content p {
            color: var(--color-on-surface-variant, #666);
            line-height: 1.6;
            margin: 0;
            font-size: 0.9em;
        }

        /* Responsive adjustments for formulas */
        @media (max-width: 768px) {
            .formula-grid {
                grid-template-columns: 1fr;
                gap: var(--space-md, 1rem);
            }

            .factor-grid {
                grid-template-columns: 1fr;
                gap: var(--space-md, 1rem);
            }

            .formula-card {
                padding: var(--space-md, 1rem);
            }

            .real-world-factors {
                padding: var(--space-lg, 1.618rem);
                margin: var(--space-lg, 1.618rem) 0;
            }

            .factor-item {
                flex-direction: column;
                text-align: center;
                gap: var(--space-sm, 0.5rem);
            }

            .factor-icon {
                align-self: center;
                padding-top: 0;
            }
        }

        /* Enhanced Learning Objectives Styling */
        .objectives-container {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: var(--radius-xl, 1rem);
            padding: var(--space-xl, 2rem);
            margin: var(--space-lg, 1.618rem) 0;
            border: 2px solid var(--color-primary, #1976d2);
            box-shadow: var(--shadow-elevation-2, 0 4px 8px rgba(25, 118, 210, 0.1));
        }

        .objectives-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            gap: var(--space-md, 1rem);
        }

        .objective-item {
            background: var(--color-surface, white);
            border-radius: var(--radius-lg, 0.75rem);
            padding: var(--space-lg, 1.618rem);
            display: flex;
            align-items: flex-start;
            gap: var(--space-md, 1rem);
            box-shadow: var(--shadow-elevation-1, 0 2px 4px rgba(0, 0, 0, 0.1));
            border: 1px solid rgba(25, 118, 210, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            cursor: pointer;
        }

        .objective-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--color-primary, #1976d2), var(--color-secondary, #ffa726));
            border-radius: var(--radius-lg, 0.75rem) var(--radius-lg, 0.75rem) 0 0;
        }

        .objective-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-elevation-3, 0 8px 16px rgba(25, 118, 210, 0.15));
            border-color: var(--color-primary, #1976d2);
        }

        .objective-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2.5rem;
            height: 2.5rem;
            background: linear-gradient(135deg, var(--color-primary, #1976d2), #1565c0);
            border-radius: 50%;
            color: white;
            font-size: 1.2rem;
        }

        .objective-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--space-sm, 0.5rem);
        }

        .objective-text {
            color: var(--color-on-surface, #333);
            font-size: var(--font-size-md, 1rem);
            line-height: 1.6;
            font-weight: 500;
        }

        .objective-difficulty {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full, 9999px);
            align-self: flex-start;
            border: 1px solid;
        }

        .objective-difficulty.basic {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            color: #166534;
            border-color: #22c55e;
        }

        .objective-difficulty.intermediate {
            background: linear-gradient(135deg, #fef3c7, #fed7aa);
            color: #92400e;
            border-color: #f59e0b;
        }

        .objective-difficulty.advanced {
            background: linear-gradient(135deg, #fce7f3, #fbcfe8);
            color: #be185d;
            border-color: #ec4899;
        }

        .objective-difficulty.expert {
            background: linear-gradient(135deg, #ede9fe, #ddd6fe);
            color: #6b21a8;
            border-color: #a855f7;
        }

        /* Interactive objective completion feature */
        .objective-item.completed {
            opacity: 0.7;
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
        }

        .objective-item.completed .objective-icon {
            background: linear-gradient(135deg, #22c55e, #16a34a);
        }

        .objective-item.completed .objective-text {
            text-decoration: line-through;
            color: var(--color-on-surface-variant, #666);
        }

        /* Responsive design for objectives */
        @media (max-width: 768px) {
            .objectives-container {
                padding: var(--space-lg, 1.618rem);
                margin: var(--space-md, 1rem) 0;
            }

            .objective-item {
                padding: var(--space-md, 1rem);
                gap: var(--space-sm, 0.75rem);
            }

            .objective-icon {
                width: 2rem;
                height: 2rem;
                font-size: 1rem;
            }

            .objective-text {
                font-size: 0.9rem;
            }

            .objective-difficulty {
                font-size: 0.7rem;
                padding: 0.2rem 0.6rem;
            }
        }

        /* Animation for objective completion */
        @keyframes objectiveComplete {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .objective-item.just-completed {
            animation: objectiveComplete 0.6s ease-in-out;
        }
    </style>

    <!-- Mobile Navigation Overlay -->
    <div class="nav-overlay" id="nav-overlay"></div>
    
    <script>
        // Mobile Navigation Toggle - Phase 1 Critical Fix
        document.addEventListener('DOMContentLoaded', function() {
            const navToggle = document.querySelector('.nav-toggle');
            const navSidebar = document.querySelector('.nav-sidebar');
            const navOverlay = document.getElementById('nav-overlay');
            
            if (!navToggle || !navSidebar || !navOverlay) return;
            
            function toggleNav() {
                const isOpen = navSidebar.classList.contains('open');
                
                if (isOpen) {
                    navSidebar.classList.remove('open');
                    navOverlay.classList.remove('active');
                    navToggle.setAttribute('aria-expanded', 'false');
                    document.body.style.overflow = '';
                } else {
                    navSidebar.classList.add('open');
                    navOverlay.classList.add('active');
                    navToggle.setAttribute('aria-expanded', 'true');
                    document.body.style.overflow = 'hidden';
                    
                    // Focus management
                    const firstFocusable = navSidebar.querySelector('a, button');
                    if (firstFocusable) firstFocusable.focus();
                }
            }
            
            // Toggle button click
            navToggle.addEventListener('click', toggleNav);
            
            // Overlay click to close
            navOverlay.addEventListener('click', toggleNav);
            
            // Escape key to close
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && navSidebar.classList.contains('open')) {
                    toggleNav();
                    navToggle.focus();
                }
            });
            
            // Close on navigation link click (mobile)
            navSidebar.addEventListener('click', function(e) {
                if (e.target.matches('a') && window.innerWidth <= 768) {
                    toggleNav();
                }
            });
        });

        // Enhanced Motion Components Animation
        document.addEventListener('DOMContentLoaded', function() {
            const demoball = document.getElementById('demo-ball');
            const speedControl = document.getElementById('speed-control');
            const speedDisplay = document.getElementById('speed-display');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const resetBtn = document.getElementById('reset-btn');
            const vizBtns = document.querySelectorAll('.viz-btn');
            const hVector = document.getElementById('h-vector');
            const vVector = document.getElementById('v-vector');

            if (!demoball) return; // Exit if elements not found

            let animationId;
            let isPlaying = true;
            let startTime = Date.now();
            let animationSpeed = 1;
            let currentMode = 'components';

            // Animation parameters
            const trajectory = {
                startX: 20,
                startY: 80, // percentage from top
                initialVx: 0.15, // pixels per ms
                initialVy: -0.08, // pixels per ms (negative = upward)
                gravity: 0.00008, // pixels per ms¬≤
                duration: 4000 // ms
            };

            function updateSpeedDisplay() {
                const speed = parseFloat(speedControl.value);
                speedDisplay.textContent = speed.toFixed(1) + 'x';
                animationSpeed = speed;
            }

            function calculatePosition(t) {
                const x = trajectory.startX + trajectory.initialVx * t;
                const y = trajectory.startY + trajectory.initialVy * t + 0.5 * trajectory.gravity * t * t;
                return { x, y };
            }

            function updateVectors(t) {
                if (currentMode !== 'components') return;

                const currentVy = trajectory.initialVy + trajectory.gravity * t;
                const pos = calculatePosition(t);

                // Update horizontal vector
                if (hVector) {
                    hVector.style.left = (pos.x + 30) + 'px';
                    hVector.style.top = (pos.y) + '%';
                    hVector.style.opacity = '1';
                }

                // Update vertical vector
                if (vVector) {
                    vVector.style.left = pos.x + 'px';
                    vVector.style.top = (pos.y - 5) + '%';
                    vVector.style.opacity = '1';

                    // Change arrow direction based on velocity
                    const arrow = vVector.querySelector('.vertical-arrow');
                    if (arrow) {
                        if (currentVy < 0) {
                            // Upward motion
                            arrow.style.borderBottom = '20px solid var(--color-accent, #4caf50)';
                            arrow.style.borderTop = 'none';
                        } else {
                            // Downward motion
                            arrow.style.borderTop = '20px solid var(--color-accent, #4caf50)';
                            arrow.style.borderBottom = 'none';
                        }
                    }
                }
            }

            function hideVectors() {
                if (hVector) hVector.style.opacity = '0';
                if (vVector) vVector.style.opacity = '0';
            }

            function animate() {
                if (!isPlaying) return;

                const elapsed = (Date.now() - startTime) * animationSpeed;
                const t = elapsed % trajectory.duration;
                const pos = calculatePosition(t);

                // Update baseball position
                demoball.style.left = Math.min(pos.x, 90) + '%';
                demoball.style.top = Math.max(Math.min(pos.y, 95), 5) + '%';

                // Update vectors based on mode
                if (currentMode === 'components') {
                    updateVectors(t);
                } else {
                    hideVectors();
                }

                // Continue animation
                animationId = requestAnimationFrame(animate);
            }

            function toggleAnimation() {
                if (isPlaying) {
                    isPlaying = false;
                    playPauseBtn.textContent = '‚ñ∂Ô∏è Play';
                    cancelAnimationFrame(animationId);
                } else {
                    isPlaying = true;
                    playPauseBtn.textContent = '‚è∏Ô∏è Pause';
                    animate();
                }
            }

            function resetAnimation() {
                startTime = Date.now();
                demoball.style.left = trajectory.startX + '%';
                demoball.style.top = trajectory.startY + '%';
                if (currentMode === 'components') {
                    updateVectors(0);
                }
            }

            function switchMode(mode) {
                currentMode = mode;

                // Update button states
                vizBtns.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.getAttribute('data-mode') === mode) {
                        btn.classList.add('active');
                    }
                });

                // Handle different visualization modes
                switch(mode) {
                    case 'components':
                        if (hVector) hVector.style.display = 'flex';
                        if (vVector) vVector.style.display = 'flex';
                        break;
                    case 'forces':
                        hideVectors();
                        // Could add force vectors here
                        break;
                    case 'motion':
                        hideVectors();
                        // Could add motion trails here
                        break;
                }
            }

            // Event listeners
            speedControl.addEventListener('input', updateSpeedDisplay);
            playPauseBtn.addEventListener('click', toggleAnimation);
            resetBtn.addEventListener('click', resetAnimation);

            vizBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const mode = this.getAttribute('data-mode');
                    switchMode(mode);
                });
            });

            // Initialize
            updateSpeedDisplay();
            resetAnimation();
            animate();
        });

        // Interactive Learning Objectives Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const objectiveItems = document.querySelectorAll('.objective-item');

            objectiveItems.forEach(item => {
                item.addEventListener('click', function() {
                    const isCompleted = this.classList.contains('completed');

                    if (isCompleted) {
                        // Uncomplete the objective
                        this.classList.remove('completed');
                        this.setAttribute('aria-checked', 'false');
                    } else {
                        // Complete the objective with animation
                        this.classList.add('just-completed');
                        this.classList.add('completed');
                        this.setAttribute('aria-checked', 'true');

                        // Remove animation class after animation completes
                        setTimeout(() => {
                            this.classList.remove('just-completed');
                        }, 600);
                    }
                });

                // Add ARIA attributes for accessibility
                item.setAttribute('role', 'checkbox');
                item.setAttribute('aria-checked', 'false');
                item.setAttribute('tabindex', '0');

                // Add keyboard support
                item.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });
        });

        // Enhanced Vector Analysis Interactive Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const vectorSpeedControl = document.getElementById('vector-speed');
            const vectorAngleControl = document.getElementById('vector-angle');
            const vectorSpeedDisplay = document.getElementById('vector-speed-display');
            const vectorAngleDisplay = document.getElementById('vector-angle-display');
            const timeSlider = document.getElementById('time-slider');
            const timeDisplay = document.getElementById('time-display');
            const playEvolutionBtn = document.getElementById('play-evolution');
            const resetEvolutionBtn = document.getElementById('reset-evolution');

            if (!vectorSpeedControl || !vectorAngleControl) return; // Exit if not found

            let evolutionAnimationId;
            let isEvolutionPlaying = false;

            // Unit conversion function
            function mphToMs(mph) {
                return mph * 0.44704; // Convert mph to m/s
            }

            function msToMph(ms) {
                return ms / 0.44704; // Convert m/s to mph
            }

            // Vector calculation functions
            function calculateVectorComponents(speedMph, angleDeg) {
                const speedMs = mphToMs(speedMph);
                const angleRad = angleDeg * Math.PI / 180;

                return {
                    speedMs: speedMs,
                    speedMph: speedMph,
                    angle: angleDeg,
                    vx: speedMs * Math.cos(angleRad),
                    vy: speedMs * Math.sin(angleRad),
                    magnitude: speedMs
                };
            }

            function updateVectorDiagram(components) {
                const scale = 3; // Scale factor for visualization
                const originX = 50;
                const originY = 250;

                // Calculate scaled components
                const scaledVx = components.vx * scale;
                const scaledVy = -components.vy * scale; // Negative for SVG coordinate system

                // Update resultant vector
                const resultantVector = document.getElementById('resultant-vector');
                if (resultantVector) {
                    resultantVector.setAttribute('x2', originX + scaledVx);
                    resultantVector.setAttribute('y2', originY + scaledVy);
                }

                // Update horizontal component
                const horizontalComponent = document.getElementById('horizontal-component');
                if (horizontalComponent) {
                    horizontalComponent.setAttribute('x2', originX + scaledVx);
                    horizontalComponent.setAttribute('y2', originY);
                }

                // Update vertical component
                const verticalComponent = document.getElementById('vertical-component');
                if (verticalComponent) {
                    verticalComponent.setAttribute('x1', originX + scaledVx);
                    verticalComponent.setAttribute('x2', originX + scaledVx);
                    verticalComponent.setAttribute('y2', originY + scaledVy);
                }

                // Update angle arc
                const angleArc = document.getElementById('angle-arc');
                const angleLabel = document.getElementById('angle-label');
                if (angleArc && angleLabel && components.angle !== 0) {
                    const arcRadius = 30;
                    const endAngle = components.angle * Math.PI / 180;
                    const arcEndX = originX + arcRadius * Math.cos(endAngle);
                    const arcEndY = originY - arcRadius * Math.sin(endAngle);

                    const sweep = components.angle > 0 ? 1 : 0;
                    const arcPath = `M ${originX + arcRadius} ${originY} A ${arcRadius} ${arcRadius} 0 0 ${sweep} ${arcEndX} ${arcEndY}`;
                    angleArc.setAttribute('d', arcPath);

                    // Position angle label
                    angleLabel.setAttribute('x', originX + arcRadius * 1.3 * Math.cos(endAngle / 2));
                    angleLabel.setAttribute('y', originY - arcRadius * 1.3 * Math.sin(endAngle / 2) + 5);
                }

                // Update vector labels positions
                const resultantLabel = document.getElementById('resultant-label');
                const horizontalLabel = document.getElementById('horizontal-label');
                const verticalLabel = document.getElementById('vertical-label');

                if (resultantLabel) {
                    resultantLabel.setAttribute('x', originX + scaledVx / 2);
                    resultantLabel.setAttribute('y', originY + scaledVy / 2 - 10);
                }

                if (horizontalLabel) {
                    horizontalLabel.setAttribute('x', originX + scaledVx / 2);
                    horizontalLabel.setAttribute('y', originY + 20);
                }

                if (verticalLabel) {
                    verticalLabel.setAttribute('x', originX + scaledVx + 15);
                    verticalLabel.setAttribute('y', originY + scaledVy / 2);
                }
            }

            function updateCalculations(components) {
                // Update live calculations
                const magnitudeCalc = document.getElementById('magnitude-calc');
                const horizontalCalc = document.getElementById('horizontal-calc');
                const verticalCalc = document.getElementById('vertical-calc');
                const angleCalc = document.getElementById('angle-calc');

                if (magnitudeCalc) magnitudeCalc.textContent = `${components.speedMs.toFixed(1)} m/s`;
                if (horizontalCalc) horizontalCalc.textContent = `${components.vx.toFixed(1)} m/s`;
                if (verticalCalc) verticalCalc.textContent = `${components.vy.toFixed(1)} m/s`;
                if (angleCalc) angleCalc.textContent = `${components.angle}¬∞`;

                // Update evolution equations
                const vxConstant = document.getElementById('vx-constant');
                const vyInitial = document.getElementById('vy-initial');

                if (vxConstant) vxConstant.textContent = components.vx.toFixed(1);
                if (vyInitial) vyInitial.textContent = components.vy.toFixed(1);
            }

            function updateControls() {
                const speed = parseFloat(vectorSpeedControl.value);
                const angle = parseFloat(vectorAngleControl.value);

                vectorSpeedDisplay.textContent = `${speed} mph`;
                vectorAngleDisplay.textContent = `${angle}¬∞`;

                const components = calculateVectorComponents(speed, angle);
                updateVectorDiagram(components);
                updateCalculations(components);
            }

            function updateEvolutionTimeline() {
                const timePercent = parseFloat(timeSlider.value);
                const maxFlightTime = 5; // seconds
                const currentTime = (timePercent / 100) * maxFlightTime;

                timeDisplay.textContent = `${currentTime.toFixed(1)}s`;

                // Calculate current velocity components
                const components = calculateVectorComponents(
                    parseFloat(vectorSpeedControl.value),
                    parseFloat(vectorAngleControl.value)
                );

                const currentVy = components.vy - 9.8 * currentTime;
                const currentMagnitude = Math.sqrt(components.vx * components.vx + currentVy * currentVy);

                // Update evolution visuals (simplified representations)
                const verticalLine = document.getElementById('vertical-line');
                const resultantLine = document.getElementById('resultant-line');

                if (verticalLine) {
                    const progress = timePercent;
                    verticalLine.style.background = `linear-gradient(135deg, #22c55e ${progress}%, #16a34a ${progress}%)`;
                }

                if (resultantLine) {
                    const normalizedMagnitude = Math.max(20, (currentMagnitude / components.magnitude) * 100);
                    resultantLine.style.background = `#1976d2`;
                    resultantLine.style.transform = `scaleY(${normalizedMagnitude / 100})`;
                }
            }

            function playEvolution() {
                if (isEvolutionPlaying) {
                    isEvolutionPlaying = false;
                    playEvolutionBtn.textContent = '‚ñ∂Ô∏è Play';
                    cancelAnimationFrame(evolutionAnimationId);
                    return;
                }

                isEvolutionPlaying = true;
                playEvolutionBtn.textContent = '‚è∏Ô∏è Pause';

                const startTime = Date.now();
                const duration = 5000; // 5 seconds

                function animate() {
                    if (!isEvolutionPlaying) return;

                    const elapsed = Date.now() - startTime;
                    const progress = Math.min((elapsed / duration) * 100, 100);

                    timeSlider.value = progress;
                    updateEvolutionTimeline();

                    if (progress < 100) {
                        evolutionAnimationId = requestAnimationFrame(animate);
                    } else {
                        isEvolutionPlaying = false;
                        playEvolutionBtn.textContent = '‚ñ∂Ô∏è Play';
                    }
                }

                animate();
            }

            function resetEvolution() {
                isEvolutionPlaying = false;
                playEvolutionBtn.textContent = '‚ñ∂Ô∏è Play';
                cancelAnimationFrame(evolutionAnimationId);
                timeSlider.value = 0;
                updateEvolutionTimeline();
            }

            // Event listeners
            vectorSpeedControl.addEventListener('input', updateControls);
            vectorAngleControl.addEventListener('input', updateControls);
            timeSlider.addEventListener('input', updateEvolutionTimeline);

            if (playEvolutionBtn) playEvolutionBtn.addEventListener('click', playEvolution);
            if (resetEvolutionBtn) resetEvolutionBtn.addEventListener('click', resetEvolution);

            // Initialize
            updateControls();
            updateEvolutionTimeline();

            // Add hover effects for speed/angle indicators
            const speedMarks = document.querySelectorAll('.speed-mark');
            const angleMarks = document.querySelectorAll('.angle-mark');

            speedMarks.forEach(mark => {
                mark.addEventListener('click', function() {
                    const speed = this.getAttribute('data-speed');
                    if (speed) {
                        vectorSpeedControl.value = speed;
                        updateControls();
                    }
                });
            });

            angleMarks.forEach(mark => {
                mark.addEventListener('click', function() {
                    const angle = this.getAttribute('data-angle');
                    if (angle) {
                        vectorAngleControl.value = angle;
                        updateControls();
                    }
                });
            });
        });

        // Progressive Disclosure Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const difficultyTabs = document.querySelectorAll('.difficulty-tab');
            const difficultyContents = document.querySelectorAll('.difficulty-content');

            if (difficultyTabs.length === 0 || difficultyContents.length === 0) return;

            function switchDifficulty(targetLevel) {
                // Remove active class from all tabs and content
                difficultyTabs.forEach(tab => {
                    tab.classList.remove('active');
                    tab.setAttribute('aria-selected', 'false');
                });

                difficultyContents.forEach(content => {
                    content.classList.remove('active');
                });

                // Add active class to clicked tab
                const activeTab = document.querySelector(`[data-level="${targetLevel}"]`);
                const activeContent = document.querySelector(`[data-level="${targetLevel}"].difficulty-content`);

                if (activeTab && activeContent) {
                    activeTab.classList.add('active');
                    activeTab.setAttribute('aria-selected', 'true');

                    // Small delay for smooth transition
                    setTimeout(() => {
                        activeContent.classList.add('active');
                    }, 50);

                    // Analytics or tracking (if needed)
                    console.log(`Switched to ${targetLevel} difficulty level`);

                    // Store user preference
                    try {
                        localStorage.setItem('preferred-difficulty-level', targetLevel);
                    } catch (e) {
                        // Ignore localStorage errors
                    }
                }
            }

            // Add click listeners to difficulty tabs
            difficultyTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const level = this.getAttribute('data-level');
                    switchDifficulty(level);
                });

                // Keyboard navigation
                tab.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        const level = this.getAttribute('data-level');
                        switchDifficulty(level);
                    }
                });
            });

            // Initialize with user's previous preference or default to basic
            try {
                const savedLevel = localStorage.getItem('preferred-difficulty-level') || 'basic';
                switchDifficulty(savedLevel);
            } catch (e) {
                switchDifficulty('basic');
            }

            // Set up proper ARIA attributes
            difficultyTabs.forEach((tab, index) => {
                tab.setAttribute('role', 'tab');
                tab.setAttribute('aria-selected', index === 0 ? 'true' : 'false');
                tab.setAttribute('tabindex', index === 0 ? '0' : '-1');
            });

            // Arrow key navigation between tabs
            let currentTabIndex = 0;
            document.addEventListener('keydown', function(e) {
                if (document.activeElement && document.activeElement.classList.contains('difficulty-tab')) {
                    let newIndex = currentTabIndex;

                    if (e.key === 'ArrowLeft' && currentTabIndex > 0) {
                        newIndex = currentTabIndex - 1;
                    } else if (e.key === 'ArrowRight' && currentTabIndex < difficultyTabs.length - 1) {
                        newIndex = currentTabIndex + 1;
                    }

                    if (newIndex !== currentTabIndex) {
                        e.preventDefault();
                        currentTabIndex = newIndex;

                        // Update tabindex
                        difficultyTabs.forEach((tab, i) => {
                            tab.setAttribute('tabindex', i === currentTabIndex ? '0' : '-1');
                        });

                        // Focus new tab
                        difficultyTabs[currentTabIndex].focus();
                    }
                }
            });
        });

        // Floating Table of Contents Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const floatingToc = document.getElementById('floating-toc');
            const tocToggle = document.getElementById('toc-toggle');
            const tocClose = document.getElementById('toc-close');
            const tocContent = document.getElementById('toc-content');
            const tocLinks = document.querySelectorAll('.toc-link');

            if (!floatingToc || !tocToggle || !tocClose) return;

            // Toggle TOC visibility
            function toggleToc() {
                const isOpen = floatingToc.classList.contains('open');
                floatingToc.classList.toggle('open');
                tocToggle.setAttribute('aria-expanded', !isOpen);

                if (!isOpen) {
                    // Focus management when opening
                    setTimeout(() => {
                        const firstLink = tocContent.querySelector('.toc-link');
                        if (firstLink) firstLink.focus();
                    }, 300);
                }
            }

            function closeToc() {
                floatingToc.classList.remove('open');
                tocToggle.setAttribute('aria-expanded', 'false');
                tocToggle.focus();
            }

            // Event listeners
            tocToggle.addEventListener('click', toggleToc);
            tocClose.addEventListener('click', closeToc);

            // Close on link click
            tocLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    // Allow default behavior for navigation
                    setTimeout(closeToc, 100);
                });
            });

            // Close on outside click (mobile)
            floatingToc.addEventListener('click', (e) => {
                if (e.target === floatingToc) {
                    closeToc();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && floatingToc.classList.contains('open')) {
                    closeToc();
                }
            });

            // Active section highlighting and reading progress
            const sections = document.querySelectorAll('section[id]');
            const sectionMap = new Map();

            // Build section map
            sections.forEach(section => {
                const id = section.id;
                const link = document.querySelector(`a[href="#${id}"].toc-link`);
                if (link) {
                    sectionMap.set(section, link);
                }
            });

            // Intersection Observer for active section tracking
            const observerOptions = {
                root: null,
                rootMargin: '-20% 0px -70% 0px',
                threshold: 0
            };

            const sectionObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const link = sectionMap.get(entry.target);
                    if (link) {
                        if (entry.isIntersecting) {
                            // Remove active class from all links
                            tocLinks.forEach(l => l.classList.remove('active'));
                            // Add active class to current link
                            link.classList.add('active');
                        }
                    }
                });
            }, observerOptions);

            // Observe all sections
            sections.forEach(section => sectionObserver.observe(section));


            // Add click handlers for mini roadmap steps
            const miniSteps = document.querySelectorAll('.mini-step');
            miniSteps.forEach((step, index) => {
                step.addEventListener('click', function() {
                    const sectionId = this.getAttribute('data-section');
                    const targetElement = document.getElementById(sectionId);

                    if (targetElement) {
                        const headerOffset = 80;
                        const elementPosition = targetElement.offsetTop;
                        const offsetPosition = elementPosition - headerOffset;

                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });

                        // Close TOC after navigation
                        setTimeout(() => {
                            if (floatingToc.classList.contains('open')) {
                                closeToc();
                            }
                        }, 100);
                    }
                });
            });

            // Smooth scrolling enhancement for TOC links
            tocLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);

                    if (targetElement) {
                        // Calculate offset for fixed headers
                        const headerOffset = 80; // Adjust based on your header height
                        const elementPosition = targetElement.offsetTop;
                        const offsetPosition = elementPosition - headerOffset;

                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>